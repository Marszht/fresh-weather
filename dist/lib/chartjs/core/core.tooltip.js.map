{"version":3,"sources":["lib/chartjs/core/core.tooltip.js"],"names":["module","exports","Chart","helpers","mergeOpacity","colorString","opacity","color","alpha","rgbaString","defaults","global","tooltips","enabled","custom","mode","position","intersect","backgroundColor","titleFontStyle","titleSpacing","titleMarginBottom","titleFontColor","titleAlign","bodySpacing","bodyFontColor","bodyAlign","footerFontStyle","footerSpacing","footerMarginTop","footerFontColor","footerAlign","yPadding","xPadding","caretSize","cornerRadius","multiKeyBackground","displayColors","callbacks","beforeTitle","noop","title","tooltipItems","data","labels","labelCount","length","item","xLabel","index","afterTitle","beforeBody","beforeLabel","label","tooltipItem","datasetLabel","datasets","datasetIndex","yLabel","labelColor","chartInstance","meta","getDatasetMeta","activeElement","view","_view","borderColor","afterLabel","afterBody","beforeFooter","footer","afterFooter","pushOrConcat","base","toPush","isArray","Array","prototype","push","apply","createTooltipItem","element","xScale","_xScale","yScale","_yScale","_scale","_index","_datasetIndex","getLabelForIndex","x","_model","y","getBaseModel","tooltipOpts","globalDefaults","getValueOrDefault","xAlign","yAlign","_bodyFontFamily","bodyFontFamily","defaultFontFamily","_bodyFontStyle","bodyFontStyle","defaultFontStyle","_bodyAlign","bodyFontSize","defaultFontSize","_titleFontFamily","titleFontFamily","_titleFontStyle","titleFontSize","_titleAlign","_footerFontFamily","footerFontFamily","_footerFontStyle","footerFontSize","_footerAlign","legendColorBackground","getTooltipSize","tooltip","model","ctx","_chart","height","width","body","combinedBodyLength","reduce","count","bodyItem","before","lines","after","titleLineCount","footerLineCount","widthPadding","maxLineWidth","line","Math","max","measureTextToolTip","font","fontString","setFontSize","each","concat","determineAlignment","size","chart","chartArea","_chartInstance","lf","rf","olf","orf","yf","midX","left","right","midY","top","bottom","opts","_options","getBackgroundPoint","vm","alignment","caretPadding","paddingAndSize","radiusAndPadding","Tooltip","Element","extend","initialize","getTitle","me","arguments","getBeforeBody","undefined","getBody","bodyItems","call","getAfterBody","getFooter","update","changed","existingModel","active","_active","_data","backgroundPoint","tooltipSize","tooltipPosition","caretX","caretY","i","len","labelColors","positioners","_eventPosition","filter","a","itemSort","sort","b","round","padding","dataPoints","drawCaret","tooltipPoint","x1","x2","x3","y1","y2","y3","ptX","ptY","setFillStyle","beginPath","moveTo","lineTo","closePath","fill","drawTitle","pt","textAlign","textBaseline","offsetY","fillText","drawBody","textColor","xLinePadding","fillLineOfText","drawColorBoxes","fillRect","setStrokeStyle","strokeRect","drawFooter","drawBackground","drawRoundedRectangle","draw","abs","handleEvent","e","options","_lastActive","type","getElementsAtEventForMode","arrayEquals","getRelativePosition","pivot","average","elements","el","hasValue","pos","nearest","eventPosition","nearestElement","minDistance","Number","POSITIVE_INFINITY","center","getCenterPoint","d","distanceBetweenPoints","tp"],"mappings":"AAAA;;AACAA,OAAOC,OAAP,GAAiB,UAASC,KAAT,EAAgB;AAChC,KAAIC,UAAUD,MAAMC,OAApB;AACA;;;AAGA,UAASC,YAAT,CAAsBC,WAAtB,EAAmCC,OAAnC,EAA4C;AAC3C,MAAIC,QAAQJ,QAAQI,KAAR,CAAcF,WAAd,CAAZ;AACA,SAAOE,MAAMC,KAAN,CAAYF,UAAUC,MAAMC,KAAN,EAAtB,EAAqCC,UAArC,EAAP;AACA;AACDP,OAAMQ,QAAN,CAAeC,MAAf,CAAsBC,QAAtB,GAAiC;AAChCC,WAAS,IADuB;AAEhCC,UAAQ,IAFwB;AAGhCC,QAAM,SAH0B;AAIhCC,YAAU,SAJsB;AAKhCC,aAAW,IALqB;AAMhCC,mBAAiB,iBANe;AAOhCC,kBAAgB,MAPgB;AAQhCC,gBAAc,CARkB;AAShCC,qBAAmB,CATa;AAUhCC,kBAAgB,SAVgB;AAWhCC,cAAY,MAXoB;AAYhCC,eAAa,CAZmB;AAahCC,iBAAe,SAbiB;AAchCC,aAAW,MAdqB;AAehCC,mBAAiB,MAfe;AAgBhCC,iBAAe,CAhBiB;AAiBhCC,mBAAiB,CAjBe;AAkBhCC,mBAAiB,SAlBe;AAmBhCC,eAAa,MAnBmB;AAoBhCC,YAAU,CApBsB;AAqBhCC,YAAU,CArBsB;AAsBhCC,aAAW,CAtBqB;AAuBhCC,gBAAc,CAvBkB;AAwBhCC,sBAAoB,SAxBY;AAyBhCC,iBAAe,IAzBiB;AA0BhCC,aAAW;AACV;AACAC,gBAAapC,QAAQqC,IAFX;AAGVC,UAAO,eAASC,YAAT,EAAuBC,IAAvB,EAA6B;AACnC;AACA,QAAIF,QAAQ,EAAZ;AACA,QAAIG,SAASD,KAAKC,MAAlB;AACA,QAAIC,aAAaD,SAASA,OAAOE,MAAhB,GAAyB,CAA1C;AACA,QAAIJ,aAAaI,MAAb,GAAsB,CAA1B,EAA6B;AAC5B,SAAIC,OAAOL,aAAa,CAAb,CAAX;AACA,SAAIK,KAAKC,MAAT,EAAiB;AAChBP,cAAQM,KAAKC,MAAb;AACA,MAFD,MAEO,IAAIH,aAAa,CAAb,IAAkBE,KAAKE,KAAL,GAAaJ,UAAnC,EAA+C;AACrDJ,cAAQG,OAAOG,KAAKE,KAAZ,CAAR;AACA;AACD;AACD,WAAOR,KAAP;AACA,IAjBS;AAkBVS,eAAY/C,QAAQqC,IAlBV;AAmBV;AACAW,eAAYhD,QAAQqC,IApBV;AAqBV;AACAY,gBAAajD,QAAQqC,IAtBX;AAuBVa,UAAO,eAASC,WAAT,EAAsBX,IAAtB,EAA4B;AAClC,QAAIY,eAAeZ,KAAKa,QAAL,CAAcF,YAAYG,YAA1B,EAAwCJ,KAAxC,IAAiD,EAApE;AACA,WAAOE,eAAe,IAAf,GAAsBD,YAAYI,MAAzC;AACA,IA1BS;AA2BVC,eAAY,oBAASL,WAAT,EAAsBM,aAAtB,EAAqC;AAChD,QAAIC,OAAOD,cAAcE,cAAd,CAA6BR,YAAYG,YAAzC,CAAX;AACA,QAAIM,gBAAgBF,KAAKlB,IAAL,CAAUW,YAAYL,KAAtB,CAApB;AACA,QAAIe,OAAOD,cAAcE,KAAzB;AACA,WAAO;AACNC,kBAAaF,KAAKE,WADZ;AAENhD,sBAAiB8C,KAAK9C;AAFhB,KAAP;AAIA,IAnCS;AAoCViD,eAAYhE,QAAQqC,IApCV;AAqCV;AACA4B,cAAWjE,QAAQqC,IAtCT;AAuCV;AACA6B,iBAAclE,QAAQqC,IAxCZ;AAyCV8B,WAAQnE,QAAQqC,IAzCN;AA0CV+B,gBAAapE,QAAQqC;AA1CX;AA1BqB,EAAjC;AAuEA;AACA,UAASgC,YAAT,CAAsBC,IAAtB,EAA4BC,MAA5B,EAAoC;AACnC,MAAIA,MAAJ,EAAY;AACX,OAAIvE,QAAQwE,OAAR,CAAgBD,MAAhB,CAAJ,EAA6B;AAC5B;AACAE,UAAMC,SAAN,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2BN,IAA3B,EAAiCC,MAAjC;AACA,IAHD,MAGO;AACND,SAAKK,IAAL,CAAUJ,MAAV;AACA;AACD;AACD,SAAOD,IAAP;AACA;AACD;AACA;AACA;AACA,UAASO,iBAAT,CAA2BC,OAA3B,EAAoC;AACnC,MAAIC,SAASD,QAAQE,OAArB;AACA,MAAIC,SAASH,QAAQI,OAAR,IAAmBJ,QAAQK,MAAxC,CAFmC,CAEa;AAChD,MAAIrC,QAAQgC,QAAQM,MAApB;AAAA,MACC9B,eAAewB,QAAQO,aADxB;AAEA,SAAO;AACNxC,WAAQkC,SAASA,OAAOO,gBAAP,CAAwBxC,KAAxB,EAA+BQ,YAA/B,CAAT,GAAwD,EAD1D;AAENC,WAAQ0B,SAASA,OAAOK,gBAAP,CAAwBxC,KAAxB,EAA+BQ,YAA/B,CAAT,GAAwD,EAF1D;AAGNR,UAAOA,KAHD;AAINQ,iBAAcA,YAJR;AAKNiC,MAAGT,QAAQU,MAAR,CAAeD,CALZ;AAMNE,MAAGX,QAAQU,MAAR,CAAeC;AANZ,GAAP;AAQA;AACD;;;;AAIA,UAASC,YAAT,CAAsBC,WAAtB,EAAmC;AAClC,MAAIC,iBAAiB7F,MAAMQ,QAAN,CAAeC,MAApC;AACA,MAAIqF,oBAAoB7F,QAAQ6F,iBAAhC;AACA,SAAO;AACN;AACA/D,aAAU6D,YAAY7D,QAFhB;AAGND,aAAU8D,YAAY9D,QAHhB;AAINiE,WAAQH,YAAYG,MAJd;AAKNC,WAAQJ,YAAYI,MALd;AAMN;AACAzE,kBAAeqE,YAAYrE,aAPrB;AAQN0E,oBAAiBH,kBAAkBF,YAAYM,cAA9B,EAA8CL,eAAeM,iBAA7D,CARX;AASNC,mBAAgBN,kBAAkBF,YAAYS,aAA9B,EAA6CR,eAAeS,gBAA5D,CATV;AAUNC,eAAYX,YAAYpE,SAVlB;AAWNgF,iBAAcV,kBAAkBF,YAAYY,YAA9B,EAA4CX,eAAeY,eAA3D,CAXR;AAYNnF,gBAAasE,YAAYtE,WAZnB;AAaN;AACAF,mBAAgBwE,YAAYxE,cAdtB;AAeNsF,qBAAkBZ,kBAAkBF,YAAYe,eAA9B,EAA+Cd,eAAeM,iBAA9D,CAfZ;AAgBNS,oBAAiBd,kBAAkBF,YAAY3E,cAA9B,EAA8C4E,eAAeS,gBAA7D,CAhBX;AAiBNO,kBAAef,kBAAkBF,YAAYiB,aAA9B,EAA6ChB,eAAeY,eAA5D,CAjBT;AAkBNK,gBAAalB,YAAYvE,UAlBnB;AAmBNH,iBAAc0E,YAAY1E,YAnBpB;AAoBNC,sBAAmByE,YAAYzE,iBApBzB;AAqBN;AACAS,oBAAiBgE,YAAYhE,eAtBvB;AAuBNmF,sBAAmBjB,kBAAkBF,YAAYoB,gBAA9B,EAAgDnB,eAAeM,iBAA/D,CAvBb;AAwBNc,qBAAkBnB,kBAAkBF,YAAYnE,eAA9B,EAA+CoE,eAAeS,gBAA9D,CAxBZ;AAyBNY,mBAAgBpB,kBAAkBF,YAAYsB,cAA9B,EAA8CrB,eAAeY,eAA7D,CAzBV;AA0BNU,iBAAcvB,YAAY/D,WA1BpB;AA2BNH,kBAAekE,YAAYlE,aA3BrB;AA4BNC,oBAAiBiE,YAAYjE,eA5BvB;AA6BN;AACAK,cAAW4D,YAAY5D,SA9BjB;AA+BNC,iBAAc2D,YAAY3D,YA/BpB;AAgCNjB,oBAAiB4E,YAAY5E,eAhCvB;AAiCNZ,YAAS,CAjCH;AAkCNgH,0BAAuBxB,YAAY1D,kBAlC7B;AAmCNC,kBAAeyD,YAAYzD;AAnCrB,GAAP;AAqCA;AACD;;;AAGA,UAASkF,cAAT,CAAwBC,OAAxB,EAAiCC,KAAjC,EAAwC;AACvC,MAAIC,MAAMF,QAAQG,MAAR,CAAeD,GAAzB;AACA,MAAIE,SAASH,MAAMzF,QAAN,GAAiB,CAA9B,CAFuC,CAEN;AACjC,MAAI6F,QAAQ,CAAZ;AACA;AACA,MAAIC,OAAOL,MAAMK,IAAjB;AACA,MAAIC,qBAAqBD,KAAKE,MAAL,CAAY,UAASC,KAAT,EAAgBC,QAAhB,EAA0B;AAC9D,UAAOD,QAAQC,SAASC,MAAT,CAAgBrF,MAAxB,GAAiCoF,SAASE,KAAT,CAAetF,MAAhD,GAAyDoF,SAASG,KAAT,CAAevF,MAA/E;AACA,GAFwB,EAEtB,CAFsB,CAAzB;AAGAiF,wBAAsBN,MAAMtE,UAAN,CAAiBL,MAAjB,GAA0B2E,MAAMrD,SAAN,CAAgBtB,MAAhE;AACA,MAAIwF,iBAAiBb,MAAMhF,KAAN,CAAYK,MAAjC;AACA,MAAIyF,kBAAkBd,MAAMnD,MAAN,CAAaxB,MAAnC;AACA,MAAIiE,gBAAgBU,MAAMV,aAA1B;AAAA,MACCL,eAAee,MAAMf,YADtB;AAAA,MAECU,iBAAiBK,MAAML,cAFxB;AAGAQ,YAAUU,iBAAiBvB,aAA3B,CAfuC,CAeG;AAC1Ca,YAAUU,iBAAiB,CAACA,iBAAiB,CAAlB,IAAuBb,MAAMrG,YAA9C,GAA6D,CAAvE,CAhBuC,CAgBmC;AAC1EwG,YAAUU,iBAAiBb,MAAMpG,iBAAvB,GAA2C,CAArD,CAjBuC,CAiBiB;AACxDuG,YAAUG,qBAAqBrB,YAA/B,CAlBuC,CAkBM;AAC7CkB,YAAUG,qBAAqB,CAACA,qBAAqB,CAAtB,IAA2BN,MAAMjG,WAAtD,GAAoE,CAA9E,CAnBuC,CAmB0C;AACjFoG,YAAUW,kBAAkBd,MAAM5F,eAAxB,GAA0C,CAApD,CApBuC,CAoBgB;AACvD+F,YAAUW,kBAAmBnB,cAA7B,CArBuC,CAqBO;AAC9CQ,YAAUW,kBAAkB,CAACA,kBAAkB,CAAnB,IAAwBd,MAAM7F,aAAhD,GAAgE,CAA1E,CAtBuC,CAsBsC;AAC7E;AACA,MAAI4G,eAAe,CAAnB;AACA,MAAIC,eAAe,SAAfA,YAAe,CAASC,IAAT,EAAe;AACjCb,WAAQc,KAAKC,GAAL,CAASf,KAAT,EAAgBH,IAAImB,kBAAJ,CAAuBH,IAAvB,EAA6Bb,KAA7B,GAAqCW,YAArD,CAAR;AACA,GAFD;AAGAd,MAAIoB,IAAJ,GAAW3I,QAAQ4I,UAAR,CAAmBhC,aAAnB,EAAkCU,MAAMX,eAAxC,EAAyDW,MAAMb,gBAA/D,CAAX;AACAc,MAAIsB,WAAJ,CAAgBjC,aAAhB;AACA5G,UAAQ8I,IAAR,CAAaxB,MAAMhF,KAAnB,EAA0BgG,YAA1B;AACA;AACAf,MAAIoB,IAAJ,GAAW3I,QAAQ4I,UAAR,CAAmBrC,YAAnB,EAAiCe,MAAMnB,cAAvC,EAAuDmB,MAAMtB,eAA7D,CAAX;AACAuB,MAAIsB,WAAJ,CAAgBtC,YAAhB;AACAvG,UAAQ8I,IAAR,CAAaxB,MAAMtE,UAAN,CAAiB+F,MAAjB,CAAwBzB,MAAMrD,SAA9B,CAAb,EAAuDqE,YAAvD;AACA;AACAD,iBAAef,MAAMpF,aAAN,GAAuBqE,eAAe,CAAtC,GAA2C,CAA1D;AACAvG,UAAQ8I,IAAR,CAAanB,IAAb,EAAmB,UAASI,QAAT,EAAmB;AACrC/H,WAAQ8I,IAAR,CAAaf,SAASC,MAAtB,EAA8BM,YAA9B;AACAtI,WAAQ8I,IAAR,CAAaf,SAASE,KAAtB,EAA6BK,YAA7B;AACAtI,WAAQ8I,IAAR,CAAaf,SAASG,KAAtB,EAA6BI,YAA7B;AACA,GAJD;AAKA;AACAD,iBAAe,CAAf;AACA;AACAd,MAAIoB,IAAJ,GAAW3I,QAAQ4I,UAAR,CAAmB3B,cAAnB,EAAmCK,MAAMN,gBAAzC,EAA2DM,MAAMR,iBAAjE,CAAX;AACAS,MAAIsB,WAAJ,CAAgB5B,cAAhB;AACAjH,UAAQ8I,IAAR,CAAaxB,MAAMnD,MAAnB,EAA2BmE,YAA3B;AACA;AACAZ,WAAS,IAAIJ,MAAMxF,QAAnB;AACA,SAAO;AACN4F,UAAOA,KADD;AAEND,WAAQA;AAFF,GAAP;AAIA;AACD;;;AAGA,UAASuB,kBAAT,CAA4B3B,OAA5B,EAAqC4B,IAArC,EAA2C;AAC1C,MAAI3B,QAAQD,QAAQ7B,MAApB;AACA,MAAI0D,QAAQ7B,QAAQG,MAApB;AACA,MAAI2B,YAAY9B,QAAQ+B,cAAR,CAAuBD,SAAvC;AACA,MAAIrD,SAAS,QAAb;AACA,MAAIC,SAAS,QAAb;AACA,MAAIuB,MAAM7B,CAAN,GAAUwD,KAAKxB,MAAnB,EAA2B;AAC1B1B,YAAS,KAAT;AACA,GAFD,MAEO,IAAIuB,MAAM7B,CAAN,GAAWyD,MAAMzB,MAAN,GAAewB,KAAKxB,MAAnC,EAA4C;AAClD1B,YAAS,QAAT;AACA;AACD,MAAIsD,EAAJ,EAAQC,EAAR,CAX0C,CAW9B;AACZ,MAAIC,GAAJ,EAASC,GAAT,CAZ0C,CAY5B;AACd,MAAIC,EAAJ,CAb0C,CAalC;AACR,MAAIC,OAAO,CAACP,UAAUQ,IAAV,GAAiBR,UAAUS,KAA5B,IAAqC,CAAhD;AACA,MAAIC,OAAO,CAACV,UAAUW,GAAV,GAAgBX,UAAUY,MAA3B,IAAqC,CAAhD;AACA,MAAIhE,WAAW,QAAf,EAAyB;AACxBsD,QAAK,YAAS9D,CAAT,EAAY;AAChB,WAAOA,KAAKmE,IAAZ;AACA,IAFD;AAGAJ,QAAK,YAAS/D,CAAT,EAAY;AAChB,WAAOA,IAAImE,IAAX;AACA,IAFD;AAGA,GAPD,MAOO;AACNL,QAAK,YAAS9D,CAAT,EAAY;AAChB,WAAOA,KAAM0D,KAAKvB,KAAL,GAAa,CAA1B;AACA,IAFD;AAGA4B,QAAK,YAAS/D,CAAT,EAAY;AAChB,WAAOA,KAAM2D,MAAMxB,KAAN,GAAeuB,KAAKvB,KAAL,GAAa,CAAzC;AACA,IAFD;AAGA;AACD6B,QAAM,aAAShE,CAAT,EAAY;AACjB,UAAOA,IAAI0D,KAAKvB,KAAT,GAAiBwB,MAAMxB,KAA9B;AACA,GAFD;AAGA8B,QAAM,aAASjE,CAAT,EAAY;AACjB,UAAOA,IAAI0D,KAAKvB,KAAT,GAAiB,CAAxB;AACA,GAFD;AAGA+B,OAAK,YAAShE,CAAT,EAAY;AAChB,UAAOA,KAAKoE,IAAL,GAAY,KAAZ,GAAoB,QAA3B;AACA,GAFD;AAGA,MAAIR,GAAG/B,MAAM/B,CAAT,CAAJ,EAAiB;AAChBO,YAAS,MAAT;AACA;AACA,OAAIyD,IAAIjC,MAAM/B,CAAV,CAAJ,EAAkB;AACjBO,aAAS,QAAT;AACAC,aAAS0D,GAAGnC,MAAM7B,CAAT,CAAT;AACA;AACD,GAPD,MAOO,IAAI6D,GAAGhC,MAAM/B,CAAT,CAAJ,EAAiB;AACvBO,YAAS,OAAT;AACA;AACA,OAAI0D,IAAIlC,MAAM/B,CAAV,CAAJ,EAAkB;AACjBO,aAAS,QAAT;AACAC,aAAS0D,GAAGnC,MAAM7B,CAAT,CAAT;AACA;AACD;AACD,MAAIuE,OAAO3C,QAAQ4C,QAAnB;AACA,SAAO;AACNnE,WAAQkE,KAAKlE,MAAL,GAAckE,KAAKlE,MAAnB,GAA4BA,MAD9B;AAENC,WAAQiE,KAAKjE,MAAL,GAAciE,KAAKjE,MAAnB,GAA4BA;AAF9B,GAAP;AAIA;AACD;;;AAGA,UAASmE,kBAAT,CAA4BC,EAA5B,EAAgClB,IAAhC,EAAsCmB,SAAtC,EAAiD;AAChD;AACA,MAAI7E,IAAI4E,GAAG5E,CAAX;AACA,MAAIE,IAAI0E,GAAG1E,CAAX;AACA,MAAI1D,YAAYoI,GAAGpI,SAAnB;AAAA,MACCsI,eAAeF,GAAGE,YADnB;AAAA,MAECrI,eAAemI,GAAGnI,YAFnB;AAAA,MAGC8D,SAASsE,UAAUtE,MAHpB;AAAA,MAICC,SAASqE,UAAUrE,MAJpB;AAAA,MAKCuE,iBAAiBvI,YAAYsI,YAL9B;AAAA,MAMCE,mBAAmBvI,eAAeqI,YANnC;AAOA,MAAIvE,WAAW,OAAf,EAAwB;AACvBP,QAAK0D,KAAKvB,KAAV;AACA,GAFD,MAEO,IAAI5B,WAAW,QAAf,EAAyB;AAC/BP,QAAM0D,KAAKvB,KAAL,GAAa,CAAnB;AACA;AACD,MAAI3B,WAAW,KAAf,EAAsB;AACrBN,QAAK6E,cAAL;AACA,GAFD,MAEO,IAAIvE,WAAW,QAAf,EAAyB;AAC/BN,QAAKwD,KAAKxB,MAAL,GAAc6C,cAAnB;AACA,GAFM,MAEA;AACN7E,QAAMwD,KAAKxB,MAAL,GAAc,CAApB;AACA;AACD,MAAI1B,WAAW,QAAf,EAAyB;AACxB,OAAID,WAAW,MAAf,EAAuB;AACtBP,SAAK+E,cAAL;AACA,IAFD,MAEO,IAAIxE,WAAW,OAAf,EAAwB;AAC9BP,SAAK+E,cAAL;AACA;AACD,GAND,MAMO,IAAIxE,WAAW,MAAf,EAAuB;AAC7BP,QAAKgF,gBAAL;AACA,GAFM,MAEA,IAAIzE,WAAW,OAAf,EAAwB;AAC9BP,QAAKgF,gBAAL;AACA;AACD,SAAO;AACNhF,MAAGA,CADG;AAENE,MAAGA;AAFG,GAAP;AAIA;AACD1F,OAAMyK,OAAN,GAAgBzK,MAAM0K,OAAN,CAAcC,MAAd,CAAqB;AACpCC,cAAY,sBAAW;AACtB,QAAKnF,MAAL,GAAcE,aAAa,KAAKuE,QAAlB,CAAd;AACA,GAHmC;AAIpC;AACA;AACAW,YAAU,oBAAW;AACpB,OAAIC,KAAK,IAAT;AACA,OAAIb,OAAOa,GAAGZ,QAAd;AACA,OAAI9H,YAAY6H,KAAK7H,SAArB;AACA,OAAIC,cAAcD,UAAUC,WAAV,CAAsBwC,KAAtB,CAA4BiG,EAA5B,EAAgCC,SAAhC,CAAlB;AAAA,OACCxI,QAAQH,UAAUG,KAAV,CAAgBsC,KAAhB,CAAsBiG,EAAtB,EAA0BC,SAA1B,CADT;AAAA,OAEC/H,aAAaZ,UAAUY,UAAV,CAAqB6B,KAArB,CAA2BiG,EAA3B,EAA+BC,SAA/B,CAFd;AAGA,OAAI7C,QAAQ,EAAZ;AACAA,WAAQ5D,aAAa4D,KAAb,EAAoB7F,WAApB,CAAR;AACA6F,WAAQ5D,aAAa4D,KAAb,EAAoB3F,KAApB,CAAR;AACA2F,WAAQ5D,aAAa4D,KAAb,EAAoBlF,UAApB,CAAR;AACA,UAAOkF,KAAP;AACA,GAlBmC;AAmBpC;AACA8C,iBAAe,yBAAW;AACzB,OAAI9C,QAAQ,KAAKgC,QAAL,CAAc9H,SAAd,CAAwBa,UAAxB,CAAmC4B,KAAnC,CAAyC,IAAzC,EAA+CkG,SAA/C,CAAZ;AACA,UAAO9K,QAAQwE,OAAR,CAAgByD,KAAhB,IAAyBA,KAAzB,GAAiCA,UAAU+C,SAAV,GAAsB,CAAC/C,KAAD,CAAtB,GAAgC,EAAxE;AACA,GAvBmC;AAwBpC;AACAgD,WAAS,iBAAS1I,YAAT,EAAuBC,IAAvB,EAA6B;AACrC,OAAIqI,KAAK,IAAT;AACA,OAAI1I,YAAY0I,GAAGZ,QAAH,CAAY9H,SAA5B;AACA,OAAI+I,YAAY,EAAhB;AACAlL,WAAQ8I,IAAR,CAAavG,YAAb,EAA2B,UAASY,WAAT,EAAsB;AAChD,QAAI4E,WAAW;AACdC,aAAQ,EADM;AAEdC,YAAO,EAFO;AAGdC,YAAO;AAHO,KAAf;AAKA7D,iBAAa0D,SAASC,MAAtB,EAA8B7F,UAAUc,WAAV,CAAsBkI,IAAtB,CAA2BN,EAA3B,EAA+B1H,WAA/B,EAA4CX,IAA5C,CAA9B;AACA6B,iBAAa0D,SAASE,KAAtB,EAA6B9F,UAAUe,KAAV,CAAgBiI,IAAhB,CAAqBN,EAArB,EAAyB1H,WAAzB,EAAsCX,IAAtC,CAA7B;AACA6B,iBAAa0D,SAASG,KAAtB,EAA6B/F,UAAU6B,UAAV,CAAqBmH,IAArB,CAA0BN,EAA1B,EAA8B1H,WAA9B,EAA2CX,IAA3C,CAA7B;AACA0I,cAAUvG,IAAV,CAAeoD,QAAf;AACA,IAVD;AAWA,UAAOmD,SAAP;AACA,GAzCmC;AA0CpC;AACAE,gBAAc,wBAAW;AACxB,OAAInD,QAAQ,KAAKgC,QAAL,CAAc9H,SAAd,CAAwB8B,SAAxB,CAAkCW,KAAlC,CAAwC,IAAxC,EAA8CkG,SAA9C,CAAZ;AACA,UAAO9K,QAAQwE,OAAR,CAAgByD,KAAhB,IAAyBA,KAAzB,GAAiCA,UAAU+C,SAAV,GAAsB,CAAC/C,KAAD,CAAtB,GAAgC,EAAxE;AACA,GA9CmC;AA+CpC;AACA;AACAoD,aAAW,qBAAW;AACrB,OAAIR,KAAK,IAAT;AACA,OAAI1I,YAAY0I,GAAGZ,QAAH,CAAY9H,SAA5B;AACA,OAAI+B,eAAe/B,UAAU+B,YAAV,CAAuBU,KAAvB,CAA6BiG,EAA7B,EAAiCC,SAAjC,CAAnB;AACA,OAAI3G,SAAShC,UAAUgC,MAAV,CAAiBS,KAAjB,CAAuBiG,EAAvB,EAA2BC,SAA3B,CAAb;AACA,OAAI1G,cAAcjC,UAAUiC,WAAV,CAAsBQ,KAAtB,CAA4BiG,EAA5B,EAAgCC,SAAhC,CAAlB;AACA,OAAI7C,QAAQ,EAAZ;AACAA,WAAQ5D,aAAa4D,KAAb,EAAoB/D,YAApB,CAAR;AACA+D,WAAQ5D,aAAa4D,KAAb,EAAoB9D,MAApB,CAAR;AACA8D,WAAQ5D,aAAa4D,KAAb,EAAoB7D,WAApB,CAAR;AACA,UAAO6D,KAAP;AACA,GA5DmC;AA6DpCqD,UAAQ,gBAASC,OAAT,EAAkB;AACzB,OAAIV,KAAK,IAAT;AACA,OAAIb,OAAOa,GAAGZ,QAAd;AACA;AACA;AACA;AACA,OAAIuB,gBAAgBX,GAAGrF,MAAvB;AACA,OAAI8B,QAAQuD,GAAGrF,MAAH,GAAYE,aAAasE,IAAb,CAAxB;AACA,OAAIyB,SAASZ,GAAGa,OAAhB;AACA,OAAIlJ,OAAOqI,GAAGc,KAAd;AACA,OAAIlI,gBAAgBoH,GAAGzB,cAAvB;AACA;AACA,OAAIgB,YAAY;AACftE,YAAQ0F,cAAc1F,MADP;AAEfC,YAAQyF,cAAczF;AAFP,IAAhB;AAIA,OAAI6F,kBAAkB;AACrBrG,OAAGiG,cAAcjG,CADI;AAErBE,OAAG+F,cAAc/F;AAFI,IAAtB;AAIA,OAAIoG,cAAc;AACjBnE,WAAO8D,cAAc9D,KADJ;AAEjBD,YAAQ+D,cAAc/D;AAFL,IAAlB;AAIA,OAAIqE,kBAAkB;AACrBvG,OAAGiG,cAAcO,MADI;AAErBtG,OAAG+F,cAAcQ;AAFI,IAAtB;AAIA,OAAIC,CAAJ,EAAOC,GAAP;AACA,OAAIT,OAAO9I,MAAX,EAAmB;AAClB2E,UAAMnH,OAAN,GAAgB,CAAhB;AACA,QAAIgM,cAAc,EAAlB;AACAL,sBAAkB/L,MAAMyK,OAAN,CAAc4B,WAAd,CAA0BpC,KAAKnJ,QAA/B,EAAyC4K,MAAzC,EAAiDZ,GAAGwB,cAApD,CAAlB;AACA,QAAI9J,eAAe,EAAnB;AACA,SAAK0J,IAAI,CAAJ,EAAOC,MAAMT,OAAO9I,MAAzB,EAAiCsJ,IAAIC,GAArC,EAA0C,EAAED,CAA5C,EAA+C;AAC9C1J,kBAAaoC,IAAb,CAAkBE,kBAAkB4G,OAAOQ,CAAP,CAAlB,CAAlB;AACA;AACD;AACA,QAAIjC,KAAKsC,MAAT,EAAiB;AAChB/J,oBAAeA,aAAa+J,MAAb,CAAoB,UAASC,CAAT,EAAY;AAC9C,aAAOvC,KAAKsC,MAAL,CAAYC,CAAZ,EAAe/J,IAAf,CAAP;AACA,MAFc,CAAf;AAGA;AACD;AACA,QAAIwH,KAAKwC,QAAT,EAAmB;AAClBjK,oBAAeA,aAAakK,IAAb,CAAkB,UAASF,CAAT,EAAYG,CAAZ,EAAe;AAC/C,aAAO1C,KAAKwC,QAAL,CAAcD,CAAd,EAAiBG,CAAjB,EAAoBlK,IAApB,CAAP;AACA,MAFc,CAAf;AAGA;AACD;AACAxC,YAAQ8I,IAAR,CAAavG,YAAb,EAA2B,UAASY,WAAT,EAAsB;AAChDgJ,iBAAYxH,IAAZ,CAAiBqF,KAAK7H,SAAL,CAAeqB,UAAf,CAA0B2H,IAA1B,CAA+BN,EAA/B,EAAmC1H,WAAnC,EAAgDM,aAAhD,CAAjB;AACA,KAFD;AAGA;AACA6D,UAAMhF,KAAN,GAAcuI,GAAGD,QAAH,CAAYrI,YAAZ,EAA0BC,IAA1B,CAAd;AACA8E,UAAMtE,UAAN,GAAmB6H,GAAGE,aAAH,CAAiBxI,YAAjB,EAA+BC,IAA/B,CAAnB;AACA8E,UAAMK,IAAN,GAAakD,GAAGI,OAAH,CAAW1I,YAAX,EAAyBC,IAAzB,CAAb;AACA8E,UAAMrD,SAAN,GAAkB4G,GAAGO,YAAH,CAAgB7I,YAAhB,EAA8BC,IAA9B,CAAlB;AACA8E,UAAMnD,MAAN,GAAe0G,GAAGQ,SAAH,CAAa9I,YAAb,EAA2BC,IAA3B,CAAf;AACA;AACA8E,UAAM/B,CAAN,GAAUiD,KAAKmE,KAAL,CAAWb,gBAAgBvG,CAA3B,CAAV;AACA+B,UAAM7B,CAAN,GAAU+C,KAAKmE,KAAL,CAAWb,gBAAgBrG,CAA3B,CAAV;AACA6B,UAAM+C,YAAN,GAAqBrK,QAAQ6F,iBAAR,CAA0BiG,gBAAgBc,OAA1C,EAAmD,CAAnD,CAArB;AACAtF,UAAM6E,WAAN,GAAoBA,WAApB;AACA;AACA7E,UAAMuF,UAAN,GAAmBtK,YAAnB;AACA;AACAsJ,kBAAczE,eAAe,IAAf,EAAqBE,KAArB,CAAd;AACA8C,gBAAYpB,mBAAmB,IAAnB,EAAyB6C,WAAzB,CAAZ;AACA;AACAD,sBAAkB1B,mBAAmB5C,KAAnB,EAA0BuE,WAA1B,EAAuCzB,SAAvC,CAAlB;AACA,IA1CD,MA0CO;AACN9C,UAAMnH,OAAN,GAAgB,CAAhB;AACA;AACDmH,SAAMxB,MAAN,GAAesE,UAAUtE,MAAzB;AACAwB,SAAMvB,MAAN,GAAeqE,UAAUrE,MAAzB;AACAuB,SAAM/B,CAAN,GAAUqG,gBAAgBrG,CAA1B;AACA+B,SAAM7B,CAAN,GAAUmG,gBAAgBnG,CAA1B;AACA6B,SAAMI,KAAN,GAAcmE,YAAYnE,KAA1B;AACAJ,SAAMG,MAAN,GAAeoE,YAAYpE,MAA3B;AACA;AACAH,SAAMyE,MAAN,GAAeD,gBAAgBvG,CAA/B;AACA+B,SAAM0E,MAAN,GAAeF,gBAAgBrG,CAA/B;AACAoF,MAAGrF,MAAH,GAAY8B,KAAZ;AACA,OAAIiE,WAAWvB,KAAKrJ,MAApB,EAA4B;AAC3BqJ,SAAKrJ,MAAL,CAAYwK,IAAZ,CAAiBN,EAAjB,EAAqBvD,KAArB;AACA;AACD,UAAOuD,EAAP;AACA,GArJmC;AAsJpCiC,aAAW,mBAASC,YAAT,EAAuB9D,IAAvB,EAA6B9I,OAA7B,EAAsC;AAChD,OAAIgK,KAAK,KAAKrG,KAAd;AACA,OAAIyD,MAAM,KAAKC,MAAL,CAAYD,GAAtB;AACA,OAAIyF,EAAJ,EAAQC,EAAR,EAAYC,EAAZ;AACA,OAAIC,EAAJ,EAAQC,EAAR,EAAYC,EAAZ;AACA,OAAItL,YAAYoI,GAAGpI,SAAnB;AACA,OAAIC,eAAemI,GAAGnI,YAAtB;AACA,OAAI8D,SAASqE,GAAGrE,MAAhB;AAAA,OACCC,SAASoE,GAAGpE,MADb;AAEA,OAAIuH,MAAMP,aAAaxH,CAAvB;AAAA,OACCgI,MAAMR,aAAatH,CADpB;AAEA,OAAIiC,QAAQuB,KAAKvB,KAAjB;AAAA,OACCD,SAASwB,KAAKxB,MADf;AAEA,OAAI1B,WAAW,QAAf,EAAyB;AACxB;AACA,QAAID,WAAW,MAAf,EAAuB;AACtBkH,UAAKM,GAAL;AACAL,UAAKD,KAAKjL,SAAV;AACAmL,UAAKF,EAAL;AACA,KAJD,MAIO;AACNA,UAAKM,MAAM5F,KAAX;AACAuF,UAAKD,KAAKjL,SAAV;AACAmL,UAAKF,EAAL;AACA;AACDI,SAAKG,MAAO9F,SAAS,CAArB;AACA0F,SAAKC,KAAKrL,SAAV;AACAsL,SAAKD,KAAKrL,SAAV;AACA,IAdD,MAcO;AACN,QAAI+D,WAAW,MAAf,EAAuB;AACtBkH,UAAKM,MAAMtL,YAAX;AACAiL,UAAKD,KAAKjL,SAAV;AACAmL,UAAKD,KAAKlL,SAAV;AACA,KAJD,MAIO,IAAI+D,WAAW,OAAf,EAAwB;AAC9BkH,UAAKM,MAAM5F,KAAN,GAAc1F,YAAnB;AACAiL,UAAKD,KAAKjL,SAAV;AACAmL,UAAKD,KAAKlL,SAAV;AACA,KAJM,MAIA;AACNkL,UAAKK,MAAO5F,QAAQ,CAApB;AACAsF,UAAKC,KAAKlL,SAAV;AACAmL,UAAKD,KAAKlL,SAAV;AACA;AACD,QAAIgE,WAAW,KAAf,EAAsB;AACrBoH,UAAKI,GAAL;AACAH,UAAKD,KAAKpL,SAAV;AACAsL,UAAKF,EAAL;AACA,KAJD,MAIO;AACNA,UAAKI,MAAM9F,MAAX;AACA2F,UAAKD,KAAKpL,SAAV;AACAsL,UAAKF,EAAL;AACA;AACD;AACD5F,OAAIiG,YAAJ,CAAiBvN,aAAakK,GAAGpJ,eAAhB,EAAiCZ,OAAjC,CAAjB;AACAoH,OAAIkG,SAAJ;AACAlG,OAAImG,MAAJ,CAAWV,EAAX,EAAeG,EAAf;AACA5F,OAAIoG,MAAJ,CAAWV,EAAX,EAAeG,EAAf;AACA7F,OAAIoG,MAAJ,CAAWT,EAAX,EAAeG,EAAf;AACA9F,OAAIqG,SAAJ;AACArG,OAAIsG,IAAJ;AACA,GAhNmC;AAiNpCC,aAAW,mBAASC,EAAT,EAAa5D,EAAb,EAAiB5C,GAAjB,EAAsBpH,OAAtB,EAA+B;AACzC,OAAImC,QAAQ6H,GAAG7H,KAAf;AACA,OAAIA,MAAMK,MAAV,EAAkB;AACjB4E,QAAIyG,SAAJ,GAAgB7D,GAAGtD,WAAnB;AACAU,QAAI0G,YAAJ,GAAmB,KAAnB;AACA,QAAIrH,gBAAgBuD,GAAGvD,aAAvB;AAAA,QACC3F,eAAekJ,GAAGlJ,YADnB;AAEAsG,QAAIiG,YAAJ,CAAiBvN,aAAakK,GAAGhJ,cAAhB,EAAgChB,OAAhC,CAAjB;AACAoH,QAAIoB,IAAJ,GAAW3I,QAAQ4I,UAAR,CAAmBhC,aAAnB,EAAkCuD,GAAGxD,eAArC,EAAsDwD,GAAG1D,gBAAzD,CAAX;AACAc,QAAIsB,WAAJ,CAAgBjC,aAAhB;AACA,QAAIqF,CAAJ,EAAOC,GAAP;AACA,QAAIgC,UAAQ,CAAZ;AACA,QAAG,CAAC/D,GAAGjI,aAAP,EAAqB;AACpBgM,eAAQ,EAAR;AACA;AACD,SAAKjC,IAAI,CAAJ,EAAOC,MAAM5J,MAAMK,MAAxB,EAAgCsJ,IAAIC,GAApC,EAAyC,EAAED,CAA3C,EAA8C;AAC7C1E,SAAI4G,QAAJ,CAAa7L,MAAM2J,CAAN,CAAb,EAAuB8B,GAAGxI,CAA1B,EAA6BwI,GAAGtI,CAAH,GAAKyI,OAAlC,EAD6C,CACF;AAC3CH,QAAGtI,CAAH,IAAQmB,gBAAgB3F,YAAxB,CAF6C,CAEP;AACtC,SAAIgL,IAAI,CAAJ,KAAU3J,MAAMK,MAApB,EAA4B;AAC3BoL,SAAGtI,CAAH,IAAQ0E,GAAGjJ,iBAAH,GAAuBD,YAA/B,CAD2B,CACkB;AAC7C;AACD;AACD;AACD,GAxOmC;AAyOpCmN,YAAU,kBAASL,EAAT,EAAa5D,EAAb,EAAiB5C,GAAjB,EAAsBpH,OAAtB,EAA+B;AACxC,OAAIoG,eAAe4D,GAAG5D,YAAtB;AACA,OAAIlF,cAAc8I,GAAG9I,WAArB;AACA,OAAIsG,OAAOwC,GAAGxC,IAAd;AACAJ,OAAIyG,SAAJ,GAAgB7D,GAAG7D,UAAnB;AACAiB,OAAI0G,YAAJ,GAAmB,KAAnB;AACA,OAAII,YAAYpO,aAAakK,GAAG7I,aAAhB,EAA+BnB,OAA/B,CAAhB;AACAoH,OAAIiG,YAAJ,CAAiBa,SAAjB;AACA9G,OAAIoB,IAAJ,GAAW3I,QAAQ4I,UAAR,CAAmBrC,YAAnB,EAAiC4D,GAAGhE,cAApC,EAAoDgE,GAAGnE,eAAvD,CAAX;AACAuB,OAAIsB,WAAJ,CAAgBtC,YAAhB;AACA;AACA,OAAI+H,eAAe,CAAnB;AACA,OAAIC,iBAAiB,SAAjBA,cAAiB,CAAShG,IAAT,EAAe;AACnChB,QAAI4G,QAAJ,CAAa5F,IAAb,EAAmBwF,GAAGxI,CAAH,GAAO+I,YAA1B,EAAwCP,GAAGtI,CAAH,GAAK,EAA7C,EADmC,CACc;AACjDsI,OAAGtI,CAAH,IAAQc,eAAelF,WAAvB;AACA,IAHD;AAIA;AACArB,WAAQ8I,IAAR,CAAaqB,GAAGnH,UAAhB,EAA4BuL,cAA5B;AACA,OAAIC,iBAAiBrE,GAAGjI,aAAxB;AACAoM,kBAAeE,iBAAkBjI,eAAe,CAAjC,GAAsC,CAArD;AACA;AACAvG,WAAQ8I,IAAR,CAAanB,IAAb,EAAmB,UAASI,QAAT,EAAmBkE,CAAnB,EAAsB;AACxCjM,YAAQ8I,IAAR,CAAaf,SAASC,MAAtB,EAA8BuG,cAA9B;AACAvO,YAAQ8I,IAAR,CAAaf,SAASE,KAAtB,EAA6B,UAASM,IAAT,EAAe;AAC3C;AACA,SAAIiG,cAAJ,EAAoB;AACnB;AACAjH,UAAIiG,YAAJ,CAAiBvN,aAAakK,GAAGhD,qBAAhB,EAAuChH,OAAvC,CAAjB;AACAoH,UAAIkH,QAAJ,CAAaV,GAAGxI,CAAhB,EAAmBwI,GAAGtI,CAAtB,EAAyBc,YAAzB,EAAuCA,YAAvC;AACA;AACAgB,UAAImH,cAAJ,CAAmBzO,aAAakK,GAAGgC,WAAH,CAAeF,CAAf,EAAkBlI,WAA/B,EAA4C5D,OAA5C,CAAnB;AACAoH,UAAIoH,UAAJ,CAAeZ,GAAGxI,CAAlB,EAAqBwI,GAAGtI,CAAxB,EAA2Bc,YAA3B,EAAyCA,YAAzC;AACA;AACAgB,UAAIiG,YAAJ,CAAiBvN,aAAakK,GAAGgC,WAAH,CAAeF,CAAf,EAAkBlL,eAA/B,EAAgDZ,OAAhD,CAAjB;AACAoH,UAAIkH,QAAJ,CAAaV,GAAGxI,CAAH,GAAO,CAApB,EAAuBwI,GAAGtI,CAAH,GAAO,CAA9B,EAAiCc,eAAe,CAAhD,EAAmDA,eAAe,CAAlE;AACAgB,UAAIiG,YAAJ,CAAiBa,SAAjB;AACA;AACDE,oBAAehG,IAAf;AACA,KAfD;AAgBAvI,YAAQ8I,IAAR,CAAaf,SAASG,KAAtB,EAA6BqG,cAA7B;AACA,IAnBD;AAoBA;AACAD,kBAAe,CAAf;AACA;AACAtO,WAAQ8I,IAAR,CAAaqB,GAAGlG,SAAhB,EAA2BsK,cAA3B;AACAR,MAAGtI,CAAH,IAAQpE,WAAR,CA7CwC,CA6CnB;AACrB,GAvRmC;AAwRpCuN,cAAY,oBAASb,EAAT,EAAa5D,EAAb,EAAiB5C,GAAjB,EAAsBpH,OAAtB,EAA+B;AAC1C,OAAIgE,SAASgG,GAAGhG,MAAhB;AACA,OAAIA,OAAOxB,MAAX,EAAmB;AAClBoL,OAAGtI,CAAH,IAAQ0E,GAAGzI,eAAX;AACA6F,QAAIyG,SAAJ,GAAgB7D,GAAGjD,YAAnB;AACAK,QAAI0G,YAAJ,GAAmB,KAAnB;AACA1G,QAAIiG,YAAJ,CAAiBvN,aAAakK,GAAGxI,eAAhB,EAAiCxB,OAAjC,CAAjB;AACAoH,QAAIoB,IAAJ,GAAW3I,QAAQ4I,UAAR,CAAmBuB,GAAGlD,cAAtB,EAAsCkD,GAAGnD,gBAAzC,EAA2DmD,GAAGrD,iBAA9D,CAAX;AACAS,QAAIsB,WAAJ,CAAgBsB,GAAGlD,cAAnB;AACAjH,YAAQ8I,IAAR,CAAa3E,MAAb,EAAqB,UAASoE,IAAT,EAAe;AACnChB,SAAI4G,QAAJ,CAAa5F,IAAb,EAAmBwF,GAAGxI,CAAtB,EAAyBwI,GAAGtI,CAA5B;AACAsI,QAAGtI,CAAH,IAAQ0E,GAAGlD,cAAH,GAAoBkD,GAAG1I,aAA/B;AACA,KAHD;AAIA;AACD,GAtSmC;AAuSpCoN,kBAAgB,wBAASd,EAAT,EAAa5D,EAAb,EAAiB5C,GAAjB,EAAsBsE,WAAtB,EAAmC1L,OAAnC,EAA4C;AAC3DoH,OAAIiG,YAAJ,CAAiBvN,aAAakK,GAAGpJ,eAAhB,EAAiCZ,OAAjC,CAAjB;AACAH,WAAQ8O,oBAAR,CAA6BvH,GAA7B,EAAkCwG,GAAGxI,CAArC,EAAwCwI,GAAGtI,CAA3C,EAA8CoG,YAAYnE,KAA1D,EAAiEmE,YAAYpE,MAA7E,EAAqF0C,GAAGnI,YAAxF;AACAuF,OAAIsG,IAAJ;AACA,GA3SmC;AA4SpCkB,QAAM,gBAAW;AAChB,OAAIxH,MAAM,KAAKC,MAAL,CAAYD,GAAtB;AACA,OAAI4C,KAAK,KAAKrG,KAAd;AACA,OAAIqG,GAAGhK,OAAH,KAAe,CAAnB,EAAsB;AACrB;AACA;AACD,OAAI0L,cAAc;AACjBnE,WAAOyC,GAAGzC,KADO;AAEjBD,YAAQ0C,GAAG1C;AAFM,IAAlB;AAIA,OAAIsG,KAAK;AACRxI,OAAG4E,GAAG5E,CADE;AAERE,OAAG0E,GAAG1E;AAFE,IAAT;AAIA;AACA,OAAItF,UAAUqI,KAAKwG,GAAL,CAAS7E,GAAGhK,OAAH,GAAa,IAAtB,IAA8B,CAA9B,GAAkCgK,GAAGhK,OAAnD;AACA,OAAI,KAAK8J,QAAL,CAAcvJ,OAAlB,EAA2B;AAC1B;AACA,SAAKmO,cAAL,CAAoBd,EAApB,EAAwB5D,EAAxB,EAA4B5C,GAA5B,EAAiCsE,WAAjC,EAA8C1L,OAA9C;AACA;AACA,SAAK2M,SAAL,CAAeiB,EAAf,EAAmBlC,WAAnB,EAAgC1L,OAAhC;AACA;AACA4N,OAAGxI,CAAH,IAAQ4E,GAAGrI,QAAX;AACAiM,OAAGtI,CAAH,IAAQ0E,GAAGtI,QAAX;AACA;AACA,SAAKiM,SAAL,CAAeC,EAAf,EAAmB5D,EAAnB,EAAuB5C,GAAvB,EAA4BpH,OAA5B;AACA;AACA,SAAKiO,QAAL,CAAcL,EAAd,EAAkB5D,EAAlB,EAAsB5C,GAAtB,EAA2BpH,OAA3B;AACA;AACA,SAAKyO,UAAL,CAAgBb,EAAhB,EAAoB5D,EAApB,EAAwB5C,GAAxB,EAA6BpH,OAA7B;AACA;AACD,GA3UmC;AA4UpC;;;;;;AAMA8O,eAAa,qBAASC,CAAT,EAAY;AACxB,OAAIrE,KAAK,IAAT;AACA,OAAIsE,UAAUtE,GAAGZ,QAAjB;AACA,OAAIsB,UAAU,KAAd;AACAV,MAAGuE,WAAH,GAAiBvE,GAAGuE,WAAH,IAAkB,EAAnC;AACA;AACA,OAAIF,EAAEG,IAAF,KAAW,UAAf,EAA2B;AAC1BxE,OAAGa,OAAH,GAAa,EAAb;AACA,IAFD,MAEO;AACNb,OAAGa,OAAH,GAAab,GAAGzB,cAAH,CAAkBkG,yBAAlB,CAA4CJ,CAA5C,EAA+CC,QAAQvO,IAAvD,EAA6DuO,OAA7D,CAAb;AACA;AACD;AACA5D,aAAU,CAACvL,QAAQuP,WAAR,CAAoB1E,GAAGa,OAAvB,EAAgCb,GAAGuE,WAAnC,CAAX;AACAvE,MAAGuE,WAAH,GAAiBvE,GAAGa,OAApB;AACA,OAAIyD,QAAQzO,OAAR,IAAmByO,QAAQxO,MAA/B,EAAuC;AACtCkK,OAAGwB,cAAH,GAAoBrM,QAAQwP,mBAAR,CAA4BN,CAA5B,EAA+BrE,GAAGrD,MAAlC,CAApB;AACA,QAAIF,QAAQuD,GAAGrF,MAAf;AACAqF,OAAGS,MAAH,CAAU,IAAV;AACAT,OAAG4E,KAAH;AACA;AACAlE,eAAYjE,MAAM/B,CAAN,KAAYsF,GAAGrF,MAAH,CAAUD,CAAvB,IAA8B+B,MAAM7B,CAAN,KAAYoF,GAAGrF,MAAH,CAAUC,CAA/D;AACA;AACD,UAAO8F,OAAP;AACA;AAzWmC,EAArB,CAAhB;AA2WA;;;AAGAxL,OAAMyK,OAAN,CAAc4B,WAAd,GAA4B;AAC3B;;;;;;AAMAsD,WAAS,iBAASC,QAAT,EAAmB;AAC3B,OAAI,CAACA,SAAShN,MAAd,EAAsB;AACrB,WAAO,KAAP;AACA;AACD,OAAIsJ,CAAJ,EAAOC,GAAP;AACA,OAAI3G,IAAI,CAAR;AACA,OAAIE,IAAI,CAAR;AACA,OAAIqC,QAAQ,CAAZ;AACA,QAAKmE,IAAI,CAAJ,EAAOC,MAAMyD,SAAShN,MAA3B,EAAmCsJ,IAAIC,GAAvC,EAA4C,EAAED,CAA9C,EAAiD;AAChD,QAAI2D,KAAKD,SAAS1D,CAAT,CAAT;AACA,QAAI2D,MAAMA,GAAGC,QAAH,EAAV,EAAyB;AACxB,SAAIC,MAAMF,GAAG9D,eAAH,EAAV;AACAvG,UAAKuK,IAAIvK,CAAT;AACAE,UAAKqK,IAAIrK,CAAT;AACA,OAAEqC,KAAF;AACA;AACD;AACD,UAAO;AACNvC,OAAGiD,KAAKmE,KAAL,CAAWpH,IAAIuC,KAAf,CADG;AAENrC,OAAG+C,KAAKmE,KAAL,CAAWlH,IAAIqC,KAAf;AAFG,IAAP;AAIA,GA5B0B;AA6B3B;;;;;;;AAOAiI,WAAS,iBAASJ,QAAT,EAAmBK,aAAnB,EAAkC;AAC1C,OAAIzK,IAAIyK,cAAczK,CAAtB;AACA,OAAIE,IAAIuK,cAAcvK,CAAtB;AACA,OAAIwK,cAAJ;AACA,OAAIC,cAAcC,OAAOC,iBAAzB;AACA,OAAInE,CAAJ,EAAOC,GAAP;AACA,QAAKD,IAAI,CAAJ,EAAOC,MAAMyD,SAAShN,MAA3B,EAAmCsJ,IAAIC,GAAvC,EAA4C,EAAED,CAA9C,EAAiD;AAChD,QAAI2D,KAAKD,SAAS1D,CAAT,CAAT;AACA,QAAI2D,MAAMA,GAAGC,QAAH,EAAV,EAAyB;AACxB,SAAIQ,SAAST,GAAGU,cAAH,EAAb;AACA,SAAIC,IAAIvQ,QAAQwQ,qBAAR,CAA8BR,aAA9B,EAA6CK,MAA7C,CAAR;AACA,SAAIE,IAAIL,WAAR,EAAqB;AACpBA,oBAAcK,CAAd;AACAN,uBAAiBL,EAAjB;AACA;AACD;AACD;AACD,OAAIK,cAAJ,EAAoB;AACnB,QAAIQ,KAAKR,eAAenE,eAAf,EAAT;AACAvG,QAAIkL,GAAGlL,CAAP;AACAE,QAAIgL,GAAGhL,CAAP;AACA;AACD,UAAO;AACNF,OAAGA,CADG;AAENE,OAAGA;AAFG,IAAP;AAIA;AA9D0B,EAA5B;AAgEA,CA5uBD","file":"core.tooltip.js","sourcesContent":["'use strict';\nmodule.exports = function(Chart) {\n\tvar helpers = Chart.helpers;\n\t/**\n \t * Helper method to merge the opacity into a color\n \t */\n\tfunction mergeOpacity(colorString, opacity) {\n\t\tvar color = helpers.color(colorString);\n\t\treturn color.alpha(opacity * color.alpha()).rgbaString();\n\t}\n\tChart.defaults.global.tooltips = {\n\t\tenabled: true,\n\t\tcustom: null,\n\t\tmode: 'nearest',\n\t\tposition: 'average',\n\t\tintersect: true,\n\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\n\t\ttitleFontStyle: 'bold',\n\t\ttitleSpacing: 2,\n\t\ttitleMarginBottom: 6,\n\t\ttitleFontColor: '#ffffff',\n\t\ttitleAlign: 'left',\n\t\tbodySpacing: 2,\n\t\tbodyFontColor: '#ffffff',\n\t\tbodyAlign: 'left',\n\t\tfooterFontStyle: 'bold',\n\t\tfooterSpacing: 2,\n\t\tfooterMarginTop: 6,\n\t\tfooterFontColor: '#ffffff',\n\t\tfooterAlign: 'left',\n\t\tyPadding: 6,\n\t\txPadding: 6,\n\t\tcaretSize: 5,\n\t\tcornerRadius: 6,\n\t\tmultiKeyBackground: '#ffffff',\n\t\tdisplayColors: true,\n\t\tcallbacks: {\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tbeforeTitle: helpers.noop,\n\t\t\ttitle: function(tooltipItems, data) {\n\t\t\t\t// Pick first xLabel for now\n\t\t\t\tvar title = '';\n\t\t\t\tvar labels = data.labels;\n\t\t\t\tvar labelCount = labels ? labels.length : 0;\n\t\t\t\tif (tooltipItems.length > 0) {\n\t\t\t\t\tvar item = tooltipItems[0];\n\t\t\t\t\tif (item.xLabel) {\n\t\t\t\t\t\ttitle = item.xLabel;\n\t\t\t\t\t} else if (labelCount > 0 && item.index < labelCount) {\n\t\t\t\t\t\ttitle = labels[item.index];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn title;\n\t\t\t},\n\t\t\tafterTitle: helpers.noop,\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tbeforeBody: helpers.noop,\n\t\t\t// Args are: (tooltipItem, data)\n\t\t\tbeforeLabel: helpers.noop,\n\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\tvar datasetLabel = data.datasets[tooltipItem.datasetIndex].label || '';\n\t\t\t\treturn datasetLabel + ': ' + tooltipItem.yLabel;\n\t\t\t},\n\t\t\tlabelColor: function(tooltipItem, chartInstance) {\n\t\t\t\tvar meta = chartInstance.getDatasetMeta(tooltipItem.datasetIndex);\n\t\t\t\tvar activeElement = meta.data[tooltipItem.index];\n\t\t\t\tvar view = activeElement._view;\n\t\t\t\treturn {\n\t\t\t\t\tborderColor: view.borderColor,\n\t\t\t\t\tbackgroundColor: view.backgroundColor\n\t\t\t\t};\n\t\t\t},\n\t\t\tafterLabel: helpers.noop,\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tafterBody: helpers.noop,\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tbeforeFooter: helpers.noop,\n\t\t\tfooter: helpers.noop,\n\t\t\tafterFooter: helpers.noop\n\t\t}\n\t};\n\t// Helper to push or concat based on if the 2nd parameter is an array or not\n\tfunction pushOrConcat(base, toPush) {\n\t\tif (toPush) {\n\t\t\tif (helpers.isArray(toPush)) {\n\t\t\t\t// base = base.concat(toPush);\n\t\t\t\tArray.prototype.push.apply(base, toPush);\n\t\t\t} else {\n\t\t\t\tbase.push(toPush);\n\t\t\t}\n\t\t}\n\t\treturn base;\n\t}\n\t// Private helper to create a tooltip item model\n\t// @param element : the chart element (point, arc, bar) to create the tooltip item for\n\t// @return : new tooltip item\n\tfunction createTooltipItem(element) {\n\t\tvar xScale = element._xScale;\n\t\tvar yScale = element._yScale || element._scale; // handle radar || polarArea charts\n\t\tvar index = element._index,\n\t\t\tdatasetIndex = element._datasetIndex;\n\t\treturn {\n\t\t\txLabel: xScale ? xScale.getLabelForIndex(index, datasetIndex) : '',\n\t\t\tyLabel: yScale ? yScale.getLabelForIndex(index, datasetIndex) : '',\n\t\t\tindex: index,\n\t\t\tdatasetIndex: datasetIndex,\n\t\t\tx: element._model.x,\n\t\t\ty: element._model.y\n\t\t};\n\t}\n\t/**\n\t * Helper to get the reset model for the tooltip\n\t * @param tooltipOpts {Object} the tooltip options\n\t */\n\tfunction getBaseModel(tooltipOpts) {\n\t\tvar globalDefaults = Chart.defaults.global;\n\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\t\treturn {\n\t\t\t// Positioning\n\t\t\txPadding: tooltipOpts.xPadding,\n\t\t\tyPadding: tooltipOpts.yPadding,\n\t\t\txAlign: tooltipOpts.xAlign,\n\t\t\tyAlign: tooltipOpts.yAlign,\n\t\t\t// Body\n\t\t\tbodyFontColor: tooltipOpts.bodyFontColor,\n\t\t\t_bodyFontFamily: getValueOrDefault(tooltipOpts.bodyFontFamily, globalDefaults.defaultFontFamily),\n\t\t\t_bodyFontStyle: getValueOrDefault(tooltipOpts.bodyFontStyle, globalDefaults.defaultFontStyle),\n\t\t\t_bodyAlign: tooltipOpts.bodyAlign,\n\t\t\tbodyFontSize: getValueOrDefault(tooltipOpts.bodyFontSize, globalDefaults.defaultFontSize),\n\t\t\tbodySpacing: tooltipOpts.bodySpacing,\n\t\t\t// Title\n\t\t\ttitleFontColor: tooltipOpts.titleFontColor,\n\t\t\t_titleFontFamily: getValueOrDefault(tooltipOpts.titleFontFamily, globalDefaults.defaultFontFamily),\n\t\t\t_titleFontStyle: getValueOrDefault(tooltipOpts.titleFontStyle, globalDefaults.defaultFontStyle),\n\t\t\ttitleFontSize: getValueOrDefault(tooltipOpts.titleFontSize, globalDefaults.defaultFontSize),\n\t\t\t_titleAlign: tooltipOpts.titleAlign,\n\t\t\ttitleSpacing: tooltipOpts.titleSpacing,\n\t\t\ttitleMarginBottom: tooltipOpts.titleMarginBottom,\n\t\t\t// Footer\n\t\t\tfooterFontColor: tooltipOpts.footerFontColor,\n\t\t\t_footerFontFamily: getValueOrDefault(tooltipOpts.footerFontFamily, globalDefaults.defaultFontFamily),\n\t\t\t_footerFontStyle: getValueOrDefault(tooltipOpts.footerFontStyle, globalDefaults.defaultFontStyle),\n\t\t\tfooterFontSize: getValueOrDefault(tooltipOpts.footerFontSize, globalDefaults.defaultFontSize),\n\t\t\t_footerAlign: tooltipOpts.footerAlign,\n\t\t\tfooterSpacing: tooltipOpts.footerSpacing,\n\t\t\tfooterMarginTop: tooltipOpts.footerMarginTop,\n\t\t\t// Appearance\n\t\t\tcaretSize: tooltipOpts.caretSize,\n\t\t\tcornerRadius: tooltipOpts.cornerRadius,\n\t\t\tbackgroundColor: tooltipOpts.backgroundColor,\n\t\t\topacity: 0,\n\t\t\tlegendColorBackground: tooltipOpts.multiKeyBackground,\n\t\t\tdisplayColors: tooltipOpts.displayColors\n\t\t};\n\t}\n\t/**\n\t * Get the size of the tooltip\n\t */\n\tfunction getTooltipSize(tooltip, model) {\n\t\tvar ctx = tooltip._chart.ctx;\n\t\tvar height = model.yPadding * 2; // Tooltip Padding\n\t\tvar width = 0;\n\t\t// Count of all lines in the body\n\t\tvar body = model.body;\n\t\tvar combinedBodyLength = body.reduce(function(count, bodyItem) {\n\t\t\treturn count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length;\n\t\t}, 0);\n\t\tcombinedBodyLength += model.beforeBody.length + model.afterBody.length;\n\t\tvar titleLineCount = model.title.length;\n\t\tvar footerLineCount = model.footer.length;\n\t\tvar titleFontSize = model.titleFontSize,\n\t\t\tbodyFontSize = model.bodyFontSize,\n\t\t\tfooterFontSize = model.footerFontSize;\n\t\theight += titleLineCount * titleFontSize; // Title Lines\n\t\theight += titleLineCount ? (titleLineCount - 1) * model.titleSpacing : 0; // Title Line Spacing\n\t\theight += titleLineCount ? model.titleMarginBottom : 0; // Title's bottom Margin\n\t\theight += combinedBodyLength * bodyFontSize; // Body Lines\n\t\theight += combinedBodyLength ? (combinedBodyLength - 1) * model.bodySpacing : 0; // Body Line Spacing\n\t\theight += footerLineCount ? model.footerMarginTop : 0; // Footer Margin\n\t\theight += footerLineCount * (footerFontSize); // Footer Lines\n\t\theight += footerLineCount ? (footerLineCount - 1) * model.footerSpacing : 0; // Footer Line Spacing\n\t\t// Title width\n\t\tvar widthPadding = 0;\n\t\tvar maxLineWidth = function(line) {\n\t\t\twidth = Math.max(width, ctx.measureTextToolTip(line).width + widthPadding);\n\t\t};\n\t\tctx.font = helpers.fontString(titleFontSize, model._titleFontStyle, model._titleFontFamily);\n\t\tctx.setFontSize(titleFontSize);\n\t\thelpers.each(model.title, maxLineWidth);\n\t\t// Body width\n\t\tctx.font = helpers.fontString(bodyFontSize, model._bodyFontStyle, model._bodyFontFamily);\n\t\tctx.setFontSize(bodyFontSize);\n\t\thelpers.each(model.beforeBody.concat(model.afterBody), maxLineWidth);\n\t\t// Body lines may include some extra width due to the color box\n\t\twidthPadding = model.displayColors ? (bodyFontSize + 2) : 0;\n\t\thelpers.each(body, function(bodyItem) {\n\t\t\thelpers.each(bodyItem.before, maxLineWidth);\n\t\t\thelpers.each(bodyItem.lines, maxLineWidth);\n\t\t\thelpers.each(bodyItem.after, maxLineWidth);\n\t\t});\n\t\t// Reset back to 0\n\t\twidthPadding = 0;\n\t\t// Footer width\n\t\tctx.font = helpers.fontString(footerFontSize, model._footerFontStyle, model._footerFontFamily);\n\t\tctx.setFontSize(footerFontSize);\n\t\thelpers.each(model.footer, maxLineWidth);\n\t\t// Add padding\n\t\twidth += 2 * model.xPadding;\n\t\treturn {\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t}\n\t/**\n\t * Helper to get the alignment of a tooltip given the size\n\t */\n\tfunction determineAlignment(tooltip, size) {\n\t\tvar model = tooltip._model;\n\t\tvar chart = tooltip._chart;\n\t\tvar chartArea = tooltip._chartInstance.chartArea;\n\t\tvar xAlign = 'center';\n\t\tvar yAlign = 'center';\n\t\tif (model.y < size.height) {\n\t\t\tyAlign = 'top';\n\t\t} else if (model.y > (chart.height - size.height)) {\n\t\t\tyAlign = 'bottom';\n\t\t}\n\t\tvar lf, rf; // functions to determine left, right alignment\n\t\tvar olf, orf; // functions to determine if left/right alignment causes tooltip to go outside chart\n\t\tvar yf; // function to get the y alignment if the tooltip goes outside of the left or right edges\n\t\tvar midX = (chartArea.left + chartArea.right) / 2;\n\t\tvar midY = (chartArea.top + chartArea.bottom) / 2;\n\t\tif (yAlign === 'center') {\n\t\t\tlf = function(x) {\n\t\t\t\treturn x <= midX;\n\t\t\t};\n\t\t\trf = function(x) {\n\t\t\t\treturn x > midX;\n\t\t\t};\n\t\t} else {\n\t\t\tlf = function(x) {\n\t\t\t\treturn x <= (size.width / 2);\n\t\t\t};\n\t\t\trf = function(x) {\n\t\t\t\treturn x >= (chart.width - (size.width / 2));\n\t\t\t};\n\t\t}\n\t\tolf = function(x) {\n\t\t\treturn x + size.width > chart.width;\n\t\t};\n\t\torf = function(x) {\n\t\t\treturn x - size.width < 0;\n\t\t};\n\t\tyf = function(y) {\n\t\t\treturn y <= midY ? 'top' : 'bottom';\n\t\t};\n\t\tif (lf(model.x)) {\n\t\t\txAlign = 'left';\n\t\t\t// Is tooltip too wide and goes over the right side of the chart.?\n\t\t\tif (olf(model.x)) {\n\t\t\t\txAlign = 'center';\n\t\t\t\tyAlign = yf(model.y);\n\t\t\t}\n\t\t} else if (rf(model.x)) {\n\t\t\txAlign = 'right';\n\t\t\t// Is tooltip too wide and goes outside left edge of canvas?\n\t\t\tif (orf(model.x)) {\n\t\t\t\txAlign = 'center';\n\t\t\t\tyAlign = yf(model.y);\n\t\t\t}\n\t\t}\n\t\tvar opts = tooltip._options;\n\t\treturn {\n\t\t\txAlign: opts.xAlign ? opts.xAlign : xAlign,\n\t\t\tyAlign: opts.yAlign ? opts.yAlign : yAlign\n\t\t};\n\t}\n\t/**\n\t * @Helper to get the location a tooltip needs to be placed at given the initial position (via the vm) and the size and alignment\n\t */\n\tfunction getBackgroundPoint(vm, size, alignment) {\n\t\t// Background Position\n\t\tvar x = vm.x;\n\t\tvar y = vm.y;\n\t\tvar caretSize = vm.caretSize,\n\t\t\tcaretPadding = vm.caretPadding,\n\t\t\tcornerRadius = vm.cornerRadius,\n\t\t\txAlign = alignment.xAlign,\n\t\t\tyAlign = alignment.yAlign,\n\t\t\tpaddingAndSize = caretSize + caretPadding,\n\t\t\tradiusAndPadding = cornerRadius + caretPadding;\n\t\tif (xAlign === 'right') {\n\t\t\tx -= size.width;\n\t\t} else if (xAlign === 'center') {\n\t\t\tx -= (size.width / 2);\n\t\t}\n\t\tif (yAlign === 'top') {\n\t\t\ty += paddingAndSize;\n\t\t} else if (yAlign === 'bottom') {\n\t\t\ty -= size.height + paddingAndSize;\n\t\t} else {\n\t\t\ty -= (size.height / 2);\n\t\t}\n\t\tif (yAlign === 'center') {\n\t\t\tif (xAlign === 'left') {\n\t\t\t\tx += paddingAndSize;\n\t\t\t} else if (xAlign === 'right') {\n\t\t\t\tx -= paddingAndSize;\n\t\t\t}\n\t\t} else if (xAlign === 'left') {\n\t\t\tx -= radiusAndPadding;\n\t\t} else if (xAlign === 'right') {\n\t\t\tx += radiusAndPadding;\n\t\t}\n\t\treturn {\n\t\t\tx: x,\n\t\t\ty: y\n\t\t};\n\t}\n\tChart.Tooltip = Chart.Element.extend({\n\t\tinitialize: function() {\n\t\t\tthis._model = getBaseModel(this._options);\n\t\t},\n\t\t// Get the title\n\t\t// Args are: (tooltipItem, data)\n\t\tgetTitle: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me._options;\n\t\t\tvar callbacks = opts.callbacks;\n\t\t\tvar beforeTitle = callbacks.beforeTitle.apply(me, arguments),\n\t\t\t\ttitle = callbacks.title.apply(me, arguments),\n\t\t\t\tafterTitle = callbacks.afterTitle.apply(me, arguments);\n\t\t\tvar lines = [];\n\t\t\tlines = pushOrConcat(lines, beforeTitle);\n\t\t\tlines = pushOrConcat(lines, title);\n\t\t\tlines = pushOrConcat(lines, afterTitle);\n\t\t\treturn lines;\n\t\t},\n\t\t// Args are: (tooltipItem, data)\n\t\tgetBeforeBody: function() {\n\t\t\tvar lines = this._options.callbacks.beforeBody.apply(this, arguments);\n\t\t\treturn helpers.isArray(lines) ? lines : lines !== undefined ? [lines] : [];\n\t\t},\n\t\t// Args are: (tooltipItem, data)\n\t\tgetBody: function(tooltipItems, data) {\n\t\t\tvar me = this;\n\t\t\tvar callbacks = me._options.callbacks;\n\t\t\tvar bodyItems = [];\n\t\t\thelpers.each(tooltipItems, function(tooltipItem) {\n\t\t\t\tvar bodyItem = {\n\t\t\t\t\tbefore: [],\n\t\t\t\t\tlines: [],\n\t\t\t\t\tafter: []\n\t\t\t\t};\n\t\t\t\tpushOrConcat(bodyItem.before, callbacks.beforeLabel.call(me, tooltipItem, data));\n\t\t\t\tpushOrConcat(bodyItem.lines, callbacks.label.call(me, tooltipItem, data));\n\t\t\t\tpushOrConcat(bodyItem.after, callbacks.afterLabel.call(me, tooltipItem, data));\n\t\t\t\tbodyItems.push(bodyItem);\n\t\t\t});\n\t\t\treturn bodyItems;\n\t\t},\n\t\t// Args are: (tooltipItem, data)\n\t\tgetAfterBody: function() {\n\t\t\tvar lines = this._options.callbacks.afterBody.apply(this, arguments);\n\t\t\treturn helpers.isArray(lines) ? lines : lines !== undefined ? [lines] : [];\n\t\t},\n\t\t// Get the footer and beforeFooter and afterFooter lines\n\t\t// Args are: (tooltipItem, data)\n\t\tgetFooter: function() {\n\t\t\tvar me = this;\n\t\t\tvar callbacks = me._options.callbacks;\n\t\t\tvar beforeFooter = callbacks.beforeFooter.apply(me, arguments);\n\t\t\tvar footer = callbacks.footer.apply(me, arguments);\n\t\t\tvar afterFooter = callbacks.afterFooter.apply(me, arguments);\n\t\t\tvar lines = [];\n\t\t\tlines = pushOrConcat(lines, beforeFooter);\n\t\t\tlines = pushOrConcat(lines, footer);\n\t\t\tlines = pushOrConcat(lines, afterFooter);\n\t\t\treturn lines;\n\t\t},\n\t\tupdate: function(changed) {\n\t\t\tvar me = this;\n\t\t\tvar opts = me._options;\n\t\t\t// Need to regenerate the model because its faster than using extend and it is necessary due to the optimization in Chart.Element.transition\n\t\t\t// that does _view = _model if ease === 1. This causes the 2nd tooltip update to set properties in both the view and model at the same time\n\t\t\t// which breaks any animations.\n\t\t\tvar existingModel = me._model;\n\t\t\tvar model = me._model = getBaseModel(opts);\n\t\t\tvar active = me._active;\n\t\t\tvar data = me._data;\n\t\t\tvar chartInstance = me._chartInstance;\n\t\t\t// In the case where active.length === 0 we need to keep these at existing values for good animations\n\t\t\tvar alignment = {\n\t\t\t\txAlign: existingModel.xAlign,\n\t\t\t\tyAlign: existingModel.yAlign\n\t\t\t};\n\t\t\tvar backgroundPoint = {\n\t\t\t\tx: existingModel.x,\n\t\t\t\ty: existingModel.y\n\t\t\t};\n\t\t\tvar tooltipSize = {\n\t\t\t\twidth: existingModel.width,\n\t\t\t\theight: existingModel.height\n\t\t\t};\n\t\t\tvar tooltipPosition = {\n\t\t\t\tx: existingModel.caretX,\n\t\t\t\ty: existingModel.caretY\n\t\t\t};\n\t\t\tvar i, len;\n\t\t\tif (active.length) {\n\t\t\t\tmodel.opacity = 1;\n\t\t\t\tvar labelColors = [];\n\t\t\t\ttooltipPosition = Chart.Tooltip.positioners[opts.position](active, me._eventPosition);\n\t\t\t\tvar tooltipItems = [];\n\t\t\t\tfor (i = 0, len = active.length; i < len; ++i) {\n\t\t\t\t\ttooltipItems.push(createTooltipItem(active[i]));\n\t\t\t\t}\n\t\t\t\t// If the user provided a filter function, use it to modify the tooltip items\n\t\t\t\tif (opts.filter) {\n\t\t\t\t\ttooltipItems = tooltipItems.filter(function(a) {\n\t\t\t\t\t\treturn opts.filter(a, data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// If the user provided a sorting function, use it to modify the tooltip items\n\t\t\t\tif (opts.itemSort) {\n\t\t\t\t\ttooltipItems = tooltipItems.sort(function(a, b) {\n\t\t\t\t\t\treturn opts.itemSort(a, b, data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// Determine colors for boxes\n\t\t\t\thelpers.each(tooltipItems, function(tooltipItem) {\n\t\t\t\t\tlabelColors.push(opts.callbacks.labelColor.call(me, tooltipItem, chartInstance));\n\t\t\t\t});\n\t\t\t\t// Build the Text Lines\n\t\t\t\tmodel.title = me.getTitle(tooltipItems, data);\n\t\t\t\tmodel.beforeBody = me.getBeforeBody(tooltipItems, data);\n\t\t\t\tmodel.body = me.getBody(tooltipItems, data);\n\t\t\t\tmodel.afterBody = me.getAfterBody(tooltipItems, data);\n\t\t\t\tmodel.footer = me.getFooter(tooltipItems, data);\n\t\t\t\t// Initial positioning and colors\n\t\t\t\tmodel.x = Math.round(tooltipPosition.x);\n\t\t\t\tmodel.y = Math.round(tooltipPosition.y);\n\t\t\t\tmodel.caretPadding = helpers.getValueOrDefault(tooltipPosition.padding, 2);\n\t\t\t\tmodel.labelColors = labelColors;\n\t\t\t\t// data points\n\t\t\t\tmodel.dataPoints = tooltipItems;\n\t\t\t\t// We need to determine alignment of the tooltip\n\t\t\t\ttooltipSize = getTooltipSize(this, model);\n\t\t\t\talignment = determineAlignment(this, tooltipSize);\n\t\t\t\t// Final Size and Position\n\t\t\t\tbackgroundPoint = getBackgroundPoint(model, tooltipSize, alignment);\n\t\t\t} else {\n\t\t\t\tmodel.opacity = 0;\n\t\t\t}\n\t\t\tmodel.xAlign = alignment.xAlign;\n\t\t\tmodel.yAlign = alignment.yAlign;\n\t\t\tmodel.x = backgroundPoint.x;\n\t\t\tmodel.y = backgroundPoint.y;\n\t\t\tmodel.width = tooltipSize.width;\n\t\t\tmodel.height = tooltipSize.height;\n\t\t\t// Point where the caret on the tooltip points to\n\t\t\tmodel.caretX = tooltipPosition.x;\n\t\t\tmodel.caretY = tooltipPosition.y;\n\t\t\tme._model = model;\n\t\t\tif (changed && opts.custom) {\n\t\t\t\topts.custom.call(me, model);\n\t\t\t}\n\t\t\treturn me;\n\t\t},\n\t\tdrawCaret: function(tooltipPoint, size, opacity) {\n\t\t\tvar vm = this._view;\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar x1, x2, x3;\n\t\t\tvar y1, y2, y3;\n\t\t\tvar caretSize = vm.caretSize;\n\t\t\tvar cornerRadius = vm.cornerRadius;\n\t\t\tvar xAlign = vm.xAlign,\n\t\t\t\tyAlign = vm.yAlign;\n\t\t\tvar ptX = tooltipPoint.x,\n\t\t\t\tptY = tooltipPoint.y;\n\t\t\tvar width = size.width,\n\t\t\t\theight = size.height;\n\t\t\tif (yAlign === 'center') {\n\t\t\t\t// Left or right side\n\t\t\t\tif (xAlign === 'left') {\n\t\t\t\t\tx1 = ptX;\n\t\t\t\t\tx2 = x1 - caretSize;\n\t\t\t\t\tx3 = x1;\n\t\t\t\t} else {\n\t\t\t\t\tx1 = ptX + width;\n\t\t\t\t\tx2 = x1 + caretSize;\n\t\t\t\t\tx3 = x1;\n\t\t\t\t}\n\t\t\t\ty2 = ptY + (height / 2);\n\t\t\t\ty1 = y2 - caretSize;\n\t\t\t\ty3 = y2 + caretSize;\n\t\t\t} else {\n\t\t\t\tif (xAlign === 'left') {\n\t\t\t\t\tx1 = ptX + cornerRadius;\n\t\t\t\t\tx2 = x1 + caretSize;\n\t\t\t\t\tx3 = x2 + caretSize;\n\t\t\t\t} else if (xAlign === 'right') {\n\t\t\t\t\tx1 = ptX + width - cornerRadius;\n\t\t\t\t\tx2 = x1 - caretSize;\n\t\t\t\t\tx3 = x2 - caretSize;\n\t\t\t\t} else {\n\t\t\t\t\tx2 = ptX + (width / 2);\n\t\t\t\t\tx1 = x2 - caretSize;\n\t\t\t\t\tx3 = x2 + caretSize;\n\t\t\t\t}\n\t\t\t\tif (yAlign === 'top') {\n\t\t\t\t\ty1 = ptY;\n\t\t\t\t\ty2 = y1 - caretSize;\n\t\t\t\t\ty3 = y1;\n\t\t\t\t} else {\n\t\t\t\t\ty1 = ptY + height;\n\t\t\t\t\ty2 = y1 + caretSize;\n\t\t\t\t\ty3 = y1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tctx.setFillStyle(mergeOpacity(vm.backgroundColor, opacity));\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x1, y1);\n\t\t\tctx.lineTo(x2, y2);\n\t\t\tctx.lineTo(x3, y3);\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t},\n\t\tdrawTitle: function(pt, vm, ctx, opacity) {\n\t\t\tvar title = vm.title;\n\t\t\tif (title.length) {\n\t\t\t\tctx.textAlign = vm._titleAlign;\n\t\t\t\tctx.textBaseline = 'top';\n\t\t\t\tvar titleFontSize = vm.titleFontSize,\n\t\t\t\t\ttitleSpacing = vm.titleSpacing;\n\t\t\t\tctx.setFillStyle(mergeOpacity(vm.titleFontColor, opacity));\n\t\t\t\tctx.font = helpers.fontString(titleFontSize, vm._titleFontStyle, vm._titleFontFamily);\n\t\t\t\tctx.setFontSize(titleFontSize);\n\t\t\t\tvar i, len;\n\t\t\t\tvar offsetY=8;\n\t\t\t\tif(!vm.displayColors){\n\t\t\t\t\toffsetY=13;\n\t\t\t\t}\n\t\t\t\tfor (i = 0, len = title.length; i < len; ++i) {\n\t\t\t\t\tctx.fillText(title[i], pt.x, pt.y+offsetY);//todo +4 title往下移动一点点\n\t\t\t\t\tpt.y += titleFontSize + titleSpacing; // Line Height and spacing\n\t\t\t\t\tif (i + 1 === title.length) {\n\t\t\t\t\t\tpt.y += vm.titleMarginBottom - titleSpacing; // If Last, add margin, remove spacing\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdrawBody: function(pt, vm, ctx, opacity) {\n\t\t\tvar bodyFontSize = vm.bodyFontSize;\n\t\t\tvar bodySpacing = vm.bodySpacing;\n\t\t\tvar body = vm.body;\n\t\t\tctx.textAlign = vm._bodyAlign;\n\t\t\tctx.textBaseline = 'top';\n\t\t\tvar textColor = mergeOpacity(vm.bodyFontColor, opacity);\n\t\t\tctx.setFillStyle(textColor);\n\t\t\tctx.font = helpers.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\n\t\t\tctx.setFontSize(bodyFontSize);\n\t\t\t// Before Body\n\t\t\tvar xLinePadding = 0;\n\t\t\tvar fillLineOfText = function(line) {\n\t\t\t\tctx.fillText(line, pt.x + xLinePadding, pt.y+10);//todo +10 title往下移动一点点\n\t\t\t\tpt.y += bodyFontSize + bodySpacing;\n\t\t\t};\n\t\t\t// Before body lines\n\t\t\thelpers.each(vm.beforeBody, fillLineOfText);\n\t\t\tvar drawColorBoxes = vm.displayColors;\n\t\t\txLinePadding = drawColorBoxes ? (bodyFontSize + 2) : 0;\n\t\t\t// Draw body lines now\n\t\t\thelpers.each(body, function(bodyItem, i) {\n\t\t\t\thelpers.each(bodyItem.before, fillLineOfText);\n\t\t\t\thelpers.each(bodyItem.lines, function(line) {\n\t\t\t\t\t// Draw Legend-like boxes if needed\n\t\t\t\t\tif (drawColorBoxes) {\n\t\t\t\t\t\t// Fill a white rect so that colours merge nicely if the opacity is < 1\n\t\t\t\t\t\tctx.setFillStyle(mergeOpacity(vm.legendColorBackground, opacity));\n\t\t\t\t\t\tctx.fillRect(pt.x, pt.y, bodyFontSize, bodyFontSize);\n\t\t\t\t\t\t// Border\n\t\t\t\t\t\tctx.setStrokeStyle(mergeOpacity(vm.labelColors[i].borderColor, opacity));\n\t\t\t\t\t\tctx.strokeRect(pt.x, pt.y, bodyFontSize, bodyFontSize);\n\t\t\t\t\t\t// Inner square\n\t\t\t\t\t\tctx.setFillStyle(mergeOpacity(vm.labelColors[i].backgroundColor, opacity));\n\t\t\t\t\t\tctx.fillRect(pt.x + 1, pt.y + 1, bodyFontSize - 2, bodyFontSize - 2);\n\t\t\t\t\t\tctx.setFillStyle(textColor);\n\t\t\t\t\t}\n\t\t\t\t\tfillLineOfText(line);\n\t\t\t\t});\n\t\t\t\thelpers.each(bodyItem.after, fillLineOfText);\n\t\t\t});\n\t\t\t// Reset back to 0 for after body\n\t\t\txLinePadding = 0;\n\t\t\t// After body lines\n\t\t\thelpers.each(vm.afterBody, fillLineOfText);\n\t\t\tpt.y -= bodySpacing; // Remove last body spacing\n\t\t},\n\t\tdrawFooter: function(pt, vm, ctx, opacity) {\n\t\t\tvar footer = vm.footer;\n\t\t\tif (footer.length) {\n\t\t\t\tpt.y += vm.footerMarginTop;\n\t\t\t\tctx.textAlign = vm._footerAlign;\n\t\t\t\tctx.textBaseline = 'top';\n\t\t\t\tctx.setFillStyle(mergeOpacity(vm.footerFontColor, opacity));\n\t\t\t\tctx.font = helpers.fontString(vm.footerFontSize, vm._footerFontStyle, vm._footerFontFamily);\n\t\t\t\tctx.setFontSize(vm.footerFontSize);\n\t\t\t\thelpers.each(footer, function(line) {\n\t\t\t\t\tctx.fillText(line, pt.x, pt.y);\n\t\t\t\t\tpt.y += vm.footerFontSize + vm.footerSpacing;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tdrawBackground: function(pt, vm, ctx, tooltipSize, opacity) {\n\t\t\tctx.setFillStyle(mergeOpacity(vm.backgroundColor, opacity));\n\t\t\thelpers.drawRoundedRectangle(ctx, pt.x, pt.y, tooltipSize.width, tooltipSize.height, vm.cornerRadius);\n\t\t\tctx.fill();\n\t\t},\n\t\tdraw: function() {\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar vm = this._view;\n\t\t\tif (vm.opacity === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tooltipSize = {\n\t\t\t\twidth: vm.width,\n\t\t\t\theight: vm.height\n\t\t\t};\n\t\t\tvar pt = {\n\t\t\t\tx: vm.x,\n\t\t\t\ty: vm.y\n\t\t\t};\n\t\t\t// IE11/Edge does not like very small opacities, so snap to 0\n\t\t\tvar opacity = Math.abs(vm.opacity < 1e-3) ? 0 : vm.opacity;\n\t\t\tif (this._options.enabled) {\n\t\t\t\t// Draw Background\n\t\t\t\tthis.drawBackground(pt, vm, ctx, tooltipSize, opacity);\n\t\t\t\t// Draw Caret\n\t\t\t\tthis.drawCaret(pt, tooltipSize, opacity);\n\t\t\t\t// Draw Title, Body, and Footer\n\t\t\t\tpt.x += vm.xPadding;\n\t\t\t\tpt.y += vm.yPadding;\n\t\t\t\t// Titles\n\t\t\t\tthis.drawTitle(pt, vm, ctx, opacity);\n\t\t\t\t// Body\n\t\t\t\tthis.drawBody(pt, vm, ctx, opacity);\n\t\t\t\t// Footer\n\t\t\t\tthis.drawFooter(pt, vm, ctx, opacity);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Handle an event\n\t\t * @private\n\t\t * @param e {Event} the event to handle\n\t\t * @returns {Boolean} true if the tooltip changed\n\t\t */\n\t\thandleEvent: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar options = me._options;\n\t\t\tvar changed = false;\n\t\t\tme._lastActive = me._lastActive || [];\n\t\t\t// Find Active Elements for tooltips\n\t\t\tif (e.type === 'mouseout') {\n\t\t\t\tme._active = [];\n\t\t\t} else {\n\t\t\t\tme._active = me._chartInstance.getElementsAtEventForMode(e, options.mode, options);\n\t\t\t}\n\t\t\t// Remember Last Actives\n\t\t\tchanged = !helpers.arrayEquals(me._active, me._lastActive);\n\t\t\tme._lastActive = me._active;\n\t\t\tif (options.enabled || options.custom) {\n\t\t\t\tme._eventPosition = helpers.getRelativePosition(e, me._chart);\n\t\t\t\tvar model = me._model;\n\t\t\t\tme.update(true);\n\t\t\t\tme.pivot();\n\t\t\t\t// See if our tooltip position changed\n\t\t\t\tchanged |= (model.x !== me._model.x) || (model.y !== me._model.y);\n\t\t\t}\n\t\t\treturn changed;\n\t\t}\n\t});\n\t/**\n\t * @namespace Chart.Tooltip.positioners\n\t */\n\tChart.Tooltip.positioners = {\n\t\t/**\n\t\t * Average mode places the tooltip at the average position of the elements shown\n\t\t * @function Chart.Tooltip.positioners.average\n\t\t * @param elements {ChartElement[]} the elements being displayed in the tooltip\n\t\t * @returns {Point} tooltip position\n\t\t */\n\t\taverage: function(elements) {\n\t\t\tif (!elements.length) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar i, len;\n\t\t\tvar x = 0;\n\t\t\tvar y = 0;\n\t\t\tvar count = 0;\n\t\t\tfor (i = 0, len = elements.length; i < len; ++i) {\n\t\t\t\tvar el = elements[i];\n\t\t\t\tif (el && el.hasValue()) {\n\t\t\t\t\tvar pos = el.tooltipPosition();\n\t\t\t\t\tx += pos.x;\n\t\t\t\t\ty += pos.y;\n\t\t\t\t\t++count;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tx: Math.round(x / count),\n\t\t\t\ty: Math.round(y / count)\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Gets the tooltip position nearest of the item nearest to the event position\n\t\t * @function Chart.Tooltip.positioners.nearest\n\t\t * @param elements {Chart.Element[]} the tooltip elements\n\t\t * @param eventPosition {Point} the position of the event in canvas coordinates\n\t\t * @returns {Point} the tooltip position\n\t\t */\n\t\tnearest: function(elements, eventPosition) {\n\t\t\tvar x = eventPosition.x;\n\t\t\tvar y = eventPosition.y;\n\t\t\tvar nearestElement;\n\t\t\tvar minDistance = Number.POSITIVE_INFINITY;\n\t\t\tvar i, len;\n\t\t\tfor (i = 0, len = elements.length; i < len; ++i) {\n\t\t\t\tvar el = elements[i];\n\t\t\t\tif (el && el.hasValue()) {\n\t\t\t\t\tvar center = el.getCenterPoint();\n\t\t\t\t\tvar d = helpers.distanceBetweenPoints(eventPosition, center);\n\t\t\t\t\tif (d < minDistance) {\n\t\t\t\t\t\tminDistance = d;\n\t\t\t\t\t\tnearestElement = el;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (nearestElement) {\n\t\t\t\tvar tp = nearestElement.tooltipPosition();\n\t\t\t\tx = tp.x;\n\t\t\t\ty = tp.y;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tx: x,\n\t\t\t\ty: y\n\t\t\t};\n\t\t}\n\t};\n};\n"]}