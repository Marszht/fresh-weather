{"version":3,"sources":["lib/chartjs/core/core.helpers.js"],"names":["color","require","module","exports","Chart","helpers","each","loopable","callback","self","reverse","i","len","isArray","length","call","keys","Object","clone","obj","objClone","value","key","slice","extend","base","setFn","ilen","arguments","configMerge","_base","Array","prototype","extension","baseHasProperty","hasOwnProperty","baseVal","scaleMerge","scaleService","getScaleDefaults","type","valueObj","index","axisType","getValueOrDefault","axisDefaults","push","getValueAtIndexOrDefault","defaultValue","undefined","indexOf","array","item","where","collection","filterCallback","filter","filtered","findIndex","scope","findNextWhere","arrayToSearch","startIndex","currentItem","findPreviousWhere","inherits","extensions","me","ChartElement","constructor","apply","Surrogate","__super__","noop","uid","id","isNumber","n","isNaN","parseFloat","isFinite","almostEquals","x","y","epsilon","Math","abs","max","reduce","Number","NEGATIVE_INFINITY","min","POSITIVE_INFINITY","sign","log10","log","LN10","toRadians","degrees","PI","toDegrees","radians","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","sqrt","angle","atan2","distance","distanceBetweenPoints","pt1","pt2","pow","aliasPixel","pixelWidth","splineCurve","firstPoint","middlePoint","afterPoint","t","previous","skip","current","next","d01","d12","s01","s12","fa","fb","EPSILON","splineCurveMonotone","points","pointsWithTangents","map","point","model","_model","deltaK","mK","pointsLen","pointBefore","pointCurrent","pointAfter","alphaK","betaK","tauK","squaredMagnitude","deltaX","controlPointPreviousX","controlPointPreviousY","controlPointNextX","controlPointNextY","nextItem","loop","previousItem","niceNum","range","round","exponent","floor","fraction","niceFraction","easingEffects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","s","p","a","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","requestAnimFrame","setTimeout","cancelAnimFrame","clearTimeout","getRelativePosition","evt","chart","mouseX","mouseY","e","originalEvent","canvas","currentTarget","srcElement","boundingRect","getBoundingClientRect","touches","clientX","clientY","paddingLeft","getStyle","paddingTop","paddingRight","paddingBottom","width","right","left","height","bottom","top","currentDevicePixelRatio","addEvent","node","eventType","method","addEventListener","attachEvent","removeEvent","handler","removeEventListener","detachEvent","bindEvents","chartInstance","arrayOfEvents","events","eventName","unbindEvents","parseMaxStyle","styleValue","parentProperty","valueInPixels","parseInt","parentNode","isConstrainedValue","getConstraintDimension","domNode","maxStyle","percentageProperty","view","document","defaultView","constrainedNode","getComputedStyle","constrainedContainer","hasCNode","hasCContainer","infinity","getConstraintWidth","getConstraintHeight","getMaximumWidth","style","container","w","clientWidth","cw","getMaximumHeight","h","clientHeight","ch","el","property","currentStyle","getPropertyValue","retinaScale","ctx","pixelRatio","devicePixelRatio","scale","originalDevicePixelRatio","clear","clearRect","fontString","pixelSize","fontStyle","fontFamily","longestText","font","arrayOfThings","cache","data","gc","garbageCollect","longest","thing","measureText","nestedThing","gcLen","splice","string","textWidth","numberOfLabelLines","numberOfLines","drawRoundedRectangle","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","c","console","error","addResizeListener","removeResizeListener","_chartjs","iframe","resizer","removeChild","toString","arrayEquals","a0","a1","v0","v1","callCallback","fn","args","_tArg","getHoverColor","colorValue","saturate","darken","rgbString"],"mappings":"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","file":"core.helpers.js","sourcesContent":["/* global window: false */\n/* global document: false */\n'use strict';\nvar color = require('../nodeModule/chartjs-color');\nmodule.exports = function(Chart) {\n\t// Global Chart helpers object for utility methods and classes\n\tvar helpers = Chart.helpers = {};\n\t// -- Basic js utility methods\n\thelpers.each = function(loopable, callback, self, reverse) {\n\t\t// Check to see if null or undefined firstly.\n\t\tvar i, len;\n\t\tif (helpers.isArray(loopable)) {\n\t\t\tlen = loopable.length;\n\t\t\tif (reverse) {\n\t\t\t\tfor (i = len - 1; i >= 0; i--) {\n\t\t\t\t\tcallback.call(self, loopable[i], i);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\tcallback.call(self, loopable[i], i);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (typeof loopable === 'object') {\n\t\t\tvar keys = Object.keys(loopable);\n\t\t\tlen = keys.length;\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tcallback.call(self, loopable[keys[i]], keys[i]);\n\t\t\t}\n\t\t}\n\t};\n\thelpers.clone = function(obj) {\n\t\tvar objClone = {};\n\t\thelpers.each(obj, function(value, key) {\n\t\t\tif (helpers.isArray(value)) {\n\t\t\t\tobjClone[key] = value.slice(0);\n\t\t\t} else if (typeof value === 'object' && value !== null) {\n\t\t\t\tobjClone[key] = helpers.clone(value);\n\t\t\t} else {\n\t\t\t\tobjClone[key] = value;\n\t\t\t}\n\t\t});\n\t\treturn objClone;\n\t};\n\thelpers.extend = function(base) {\n\t\tvar setFn = function(value, key) {\n\t\t\tbase[key] = value;\n\t\t};\n\t\tfor (var i = 1, ilen = arguments.length; i < ilen; i++) {\n\t\t\thelpers.each(arguments[i], setFn);\n\t\t}\n\t\treturn base;\n\t};\n\t// Need a special merge function to chart configs since they are now grouped\n\thelpers.configMerge = function(_base) {\n\t\tvar base = helpers.clone(_base);\n\t\thelpers.each(Array.prototype.slice.call(arguments, 1), function(extension) {\n\t\t\thelpers.each(extension, function(value, key) {\n\t\t\t\tvar baseHasProperty = base.hasOwnProperty(key);\n\t\t\t\tvar baseVal = baseHasProperty ? base[key] : {};\n\t\t\t\tif (key === 'scales') {\n\t\t\t\t\t// Scale config merging is complex. Add our own function here for that\n\t\t\t\t\tbase[key] = helpers.scaleMerge(baseVal, value);\n\t\t\t\t} else if (key === 'scale') {\n\t\t\t\t\t// Used in polar area & radar charts since there is only one scale\n\t\t\t\t\tbase[key] = helpers.configMerge(baseVal, Chart.scaleService.getScaleDefaults(value.type), value);\n\t\t\t\t} else if (baseHasProperty\n\t\t\t\t\t\t&& typeof baseVal === 'object'\n\t\t\t\t\t\t&& !helpers.isArray(baseVal)\n\t\t\t\t\t\t&& baseVal !== null\n\t\t\t\t\t\t&& typeof value === 'object'\n\t\t\t\t\t\t&& !helpers.isArray(value)) {\n\t\t\t\t\t// If we are overwriting an object with an object, do a merge of the properties.\n\t\t\t\t\tbase[key] = helpers.configMerge(baseVal, value);\n\t\t\t\t} else {\n\t\t\t\t\t// can just overwrite the value in this case\n\t\t\t\t\tbase[key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn base;\n\t};\n\thelpers.scaleMerge = function(_base, extension) {\n\t\tvar base = helpers.clone(_base);\n\t\thelpers.each(extension, function(value, key) {\n\t\t\tif (key === 'xAxes' || key === 'yAxes') {\n\t\t\t\t// These properties are arrays of items\n\t\t\t\tif (base.hasOwnProperty(key)) {\n\t\t\t\t\thelpers.each(value, function(valueObj, index) {\n\t\t\t\t\t\tvar axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n\t\t\t\t\t\tvar axisDefaults = Chart.scaleService.getScaleDefaults(axisType);\n\t\t\t\t\t\tif (index >= base[key].length || !base[key][index].type) {\n\t\t\t\t\t\t\tbase[key].push(helpers.configMerge(axisDefaults, valueObj));\n\t\t\t\t\t\t} else if (valueObj.type && valueObj.type !== base[key][index].type) {\n\t\t\t\t\t\t\t// Type changed. Bring in the new defaults before we bring in valueObj so that valueObj can override the correct scale defaults\n\t\t\t\t\t\t\tbase[key][index] = helpers.configMerge(base[key][index], axisDefaults, valueObj);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Type is the same\n\t\t\t\t\t\t\tbase[key][index] = helpers.configMerge(base[key][index], valueObj);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tbase[key] = [];\n\t\t\t\t\thelpers.each(value, function(valueObj) {\n\t\t\t\t\t\tvar axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n\t\t\t\t\t\tbase[key].push(helpers.configMerge(Chart.scaleService.getScaleDefaults(axisType), valueObj));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (base.hasOwnProperty(key) && typeof base[key] === 'object' && base[key] !== null && typeof value === 'object') {\n\t\t\t\t// If we are overwriting an object with an object, do a merge of the properties.\n\t\t\t\tbase[key] = helpers.configMerge(base[key], value);\n\t\t\t} else {\n\t\t\t\t// can just overwrite the value in this case\n\t\t\t\tbase[key] = value;\n\t\t\t}\n\t\t});\n\t\treturn base;\n\t};\n\thelpers.getValueAtIndexOrDefault = function(value, index, defaultValue) {\n\t\tif (value === undefined || value === null) {\n\t\t\treturn defaultValue;\n\t\t}\n\t\tif (helpers.isArray(value)) {\n\t\t\treturn index < value.length ? value[index] : defaultValue;\n\t\t}\n\t\treturn value;\n\t};\n\thelpers.getValueOrDefault = function(value, defaultValue) {\n\t\treturn value === undefined ? defaultValue : value;\n\t};\n\thelpers.indexOf = Array.prototype.indexOf?\n\t\tfunction(array, item) {\n\t\t\treturn array.indexOf(item);\n\t\t}:\n\t\tfunction(array, item) {\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\n\t\t\t\tif (array[i] === item) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\thelpers.where = function(collection, filterCallback) {\n\t\tif (helpers.isArray(collection) && Array.prototype.filter) {\n\t\t\treturn collection.filter(filterCallback);\n\t\t}\n\t\tvar filtered = [];\n\t\thelpers.each(collection, function(item) {\n\t\t\tif (filterCallback(item)) {\n\t\t\t\tfiltered.push(item);\n\t\t\t}\n\t\t});\n\t\treturn filtered;\n\t};\n\thelpers.findIndex = Array.prototype.findIndex?\n\t\tfunction(array, callback, scope) {\n\t\t\treturn array.findIndex(callback, scope);\n\t\t} :\n\t\tfunction(array, callback, scope) {\n\t\t\tscope = scope === undefined? array : scope;\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\n\t\t\t\tif (callback.call(scope, array[i], i, array)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\thelpers.findNextWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to start of the array\n\t\tif (startIndex === undefined || startIndex === null) {\n\t\t\tstartIndex = -1;\n\t\t}\n\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to end of the array\n\t\tif (startIndex === undefined || startIndex === null) {\n\t\t\tstartIndex = arrayToSearch.length;\n\t\t}\n\t\tfor (var i = startIndex - 1; i >= 0; i--) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.inherits = function(extensions) {\n\t\t// Basic javascript inheritance based on the model created in Backbone.js\n\t\tvar me = this;\n\t\tvar ChartElement = (extensions && extensions.hasOwnProperty('constructor')) ? extensions.constructor : function() {\n\t\t\treturn me.apply(this, arguments);\n\t\t};\n\t\tvar Surrogate = function() {\n\t\t\tthis.constructor = ChartElement;\n\t\t};\n\t\tSurrogate.prototype = me.prototype;\n\t\tChartElement.prototype = new Surrogate();\n\t\tChartElement.extend = helpers.inherits;\n\t\tif (extensions) {\n\t\t\thelpers.extend(ChartElement.prototype, extensions);\n\t\t}\n\t\tChartElement.__super__ = me.prototype;\n\t\treturn ChartElement;\n\t};\n\thelpers.noop = function() {};\n\thelpers.uid = (function() {\n\t\tvar id = 0;\n\t\treturn function() {\n\t\t\treturn id++;\n\t\t};\n\t}());\n\t// -- Math methods\n\thelpers.isNumber = function(n) {\n\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t};\n\thelpers.almostEquals = function(x, y, epsilon) {\n\t\treturn Math.abs(x - y) < epsilon;\n\t};\n\thelpers.max = function(array) {\n\t\treturn array.reduce(function(max, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.max(max, value);\n\t\t\t}\n\t\t\treturn max;\n\t\t}, Number.NEGATIVE_INFINITY);\n\t};\n\thelpers.min = function(array) {\n\t\treturn array.reduce(function(min, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.min(min, value);\n\t\t\t}\n\t\t\treturn min;\n\t\t}, Number.POSITIVE_INFINITY);\n\t};\n\thelpers.sign = Math.sign?\n\t\tfunction(x) {\n\t\t\treturn Math.sign(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\tx = +x; // convert to a number\n\t\t\tif (x === 0 || isNaN(x)) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\treturn x > 0 ? 1 : -1;\n\t\t};\n\thelpers.log10 = Math.log10?\n\t\tfunction(x) {\n\t\t\treturn Math.log10(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\treturn Math.log(x) / Math.LN10;\n\t\t};\n\thelpers.toRadians = function(degrees) {\n\t\treturn degrees * (Math.PI / 180);\n\t};\n\thelpers.toDegrees = function(radians) {\n\t\treturn radians * (180 / Math.PI);\n\t};\n\t// Gets the angle from vertical upright to the point about a centre.\n\thelpers.getAngleFromPoint = function(centrePoint, anglePoint) {\n\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x,\n\t\t\tdistanceFromYCenter = anglePoint.y - centrePoint.y,\n\t\t\tradialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\t\tvar angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\t\tif (angle < (-0.5 * Math.PI)) {\n\t\t\tangle += 2.0 * Math.PI; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n\t\t}\n\t\treturn {\n\t\t\tangle: angle,\n\t\t\tdistance: radialDistanceFromCenter\n\t\t};\n\t};\n\thelpers.distanceBetweenPoints = function(pt1, pt2) {\n\t\treturn Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n\t};\n\thelpers.aliasPixel = function(pixelWidth) {\n\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\n\t};\n\thelpers.splineCurve = function(firstPoint, middlePoint, afterPoint, t) {\n\t\t// Props to Rob Spencer at scaled innovation for his post on splining between points\n\t\t// http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\t\t// This function must also respect \"skipped\" points\n\t\tvar previous = firstPoint.skip ? middlePoint : firstPoint,\n\t\t\tcurrent = middlePoint,\n\t\t\tnext = afterPoint.skip ? middlePoint : afterPoint;\n\t\tvar d01 = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2));\n\t\tvar d12 = Math.sqrt(Math.pow(next.x - current.x, 2) + Math.pow(next.y - current.y, 2));\n\t\tvar s01 = d01 / (d01 + d12);\n\t\tvar s12 = d12 / (d01 + d12);\n\t\t// If all points are the same, s01 & s02 will be inf\n\t\ts01 = isNaN(s01) ? 0 : s01;\n\t\ts12 = isNaN(s12) ? 0 : s12;\n\t\tvar fa = t * s01; // scaling factor for triangle Ta\n\t\tvar fb = t * s12;\n\t\treturn {\n\t\t\tprevious: {\n\t\t\t\tx: current.x - fa * (next.x - previous.x),\n\t\t\t\ty: current.y - fa * (next.y - previous.y)\n\t\t\t},\n\t\t\tnext: {\n\t\t\t\tx: current.x + fb * (next.x - previous.x),\n\t\t\t\ty: current.y + fb * (next.y - previous.y)\n\t\t\t}\n\t\t};\n\t};\n\thelpers.EPSILON = Number.EPSILON || 1e-14;\n\thelpers.splineCurveMonotone = function(points) {\n\t\t// This function calculates Bézier control points in a similar way than |splineCurve|,\n\t\t// but preserves monotonicity of the provided data and ensures no local extremums are added\n\t\t// between the dataset discrete points due to the interpolation.\n\t\t// See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n\t\tvar pointsWithTangents = (points || []).map(function(point) {\n\t\t\treturn {\n\t\t\t\tmodel: point._model,\n\t\t\t\tdeltaK: 0,\n\t\t\t\tmK: 0\n\t\t\t};\n\t\t});\n\t\t// Calculate slopes (deltaK) and initialize tangents (mK)\n\t\tvar pointsLen = pointsWithTangents.length;\n\t\tvar i, pointBefore, pointCurrent, pointAfter;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tpointCurrent.deltaK = (pointAfter.model.y - pointCurrent.model.y) / (pointAfter.model.x - pointCurrent.model.x);\n\t\t\t}\n\t\t\tif (!pointBefore || pointBefore.model.skip) {\n\t\t\t\tpointCurrent.mK = pointCurrent.deltaK;\n\t\t\t} else if (!pointAfter || pointAfter.model.skip) {\n\t\t\t\tpointCurrent.mK = pointBefore.deltaK;\n\t\t\t} else if (this.sign(pointBefore.deltaK) !== this.sign(pointCurrent.deltaK)) {\n\t\t\t\tpointCurrent.mK = 0;\n\t\t\t} else {\n\t\t\t\tpointCurrent.mK = (pointBefore.deltaK + pointCurrent.deltaK) / 2;\n\t\t\t}\n\t\t}\n\t\t// Adjust tangents to ensure monotonic properties\n\t\tvar alphaK, betaK, tauK, squaredMagnitude;\n\t\tfor (i = 0; i < pointsLen - 1; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tpointAfter = pointsWithTangents[i + 1];\n\t\t\tif (pointCurrent.model.skip || pointAfter.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (helpers.almostEquals(pointCurrent.deltaK, 0, this.EPSILON)) {\n\t\t\t\tpointCurrent.mK = pointAfter.mK = 0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\talphaK = pointCurrent.mK / pointCurrent.deltaK;\n\t\t\tbetaK = pointAfter.mK / pointCurrent.deltaK;\n\t\t\tsquaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n\t\t\tif (squaredMagnitude <= 9) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttauK = 3 / Math.sqrt(squaredMagnitude);\n\t\t\tpointCurrent.mK = alphaK * tauK * pointCurrent.deltaK;\n\t\t\tpointAfter.mK = betaK * tauK * pointCurrent.deltaK;\n\t\t}\n\t\t// Compute control points\n\t\tvar deltaX;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointBefore && !pointBefore.model.skip) {\n\t\t\t\tdeltaX = (pointCurrent.model.x - pointBefore.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointPreviousX = pointCurrent.model.x - deltaX;\n\t\t\t\tpointCurrent.model.controlPointPreviousY = pointCurrent.model.y - deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tdeltaX = (pointAfter.model.x - pointCurrent.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointNextX = pointCurrent.model.x + deltaX;\n\t\t\t\tpointCurrent.model.controlPointNextY = pointCurrent.model.y + deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.nextItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index >= collection.length - 1 ? collection[0] : collection[index + 1];\n\t\t}\n\t\treturn index >= collection.length - 1 ? collection[collection.length - 1] : collection[index + 1];\n\t};\n\thelpers.previousItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index <= 0 ? collection[collection.length - 1] : collection[index - 1];\n\t\t}\n\t\treturn index <= 0 ? collection[0] : collection[index - 1];\n\t};\n\t// Implementation of the nice number algorithm used in determining where axis labels will go\n\thelpers.niceNum = function(range, round) {\n\t\tvar exponent = Math.floor(helpers.log10(range));\n\t\tvar fraction = range / Math.pow(10, exponent);\n\t\tvar niceFraction;\n\t\tif (round) {\n\t\t\tif (fraction < 1.5) {\n\t\t\t\tniceFraction = 1;\n\t\t\t} else if (fraction < 3) {\n\t\t\t\tniceFraction = 2;\n\t\t\t} else if (fraction < 7) {\n\t\t\t\tniceFraction = 5;\n\t\t\t} else {\n\t\t\t\tniceFraction = 10;\n\t\t\t}\n\t\t} else if (fraction <= 1.0) {\n\t\t\tniceFraction = 1;\n\t\t} else if (fraction <= 2) {\n\t\t\tniceFraction = 2;\n\t\t} else if (fraction <= 5) {\n\t\t\tniceFraction = 5;\n\t\t} else {\n\t\t\tniceFraction = 10;\n\t\t}\n\t\treturn niceFraction * Math.pow(10, exponent);\n\t};\n\t// Easing functions adapted from Robert Penner's easing equations\n\t// http://www.robertpenner.com/easing/\n\tvar easingEffects = helpers.easingEffects = {\n\t\tlinear: function(t) {\n\t\t\treturn t;\n\t\t},\n\t\teaseInQuad: function(t) {\n\t\t\treturn t * t;\n\t\t},\n\t\teaseOutQuad: function(t) {\n\t\t\treturn -1 * t * (t - 2);\n\t\t},\n\t\teaseInOutQuad: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t;\n\t\t\t}\n\t\t\treturn -1 / 2 * ((--t) * (t - 2) - 1);\n\t\t},\n\t\teaseInCubic: function(t) {\n\t\t\treturn t * t * t;\n\t\t},\n\t\teaseOutCubic: function(t) {\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * t + 1);\n\t\t},\n\t\teaseInOutCubic: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t;\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * t + 2);\n\t\t},\n\t\teaseInQuart: function(t) {\n\t\t\treturn t * t * t * t;\n\t\t},\n\t\teaseOutQuart: function(t) {\n\t\t\treturn -1 * ((t = t / 1 - 1) * t * t * t - 1);\n\t\t},\n\t\teaseInOutQuart: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t * t;\n\t\t\t}\n\t\t\treturn -1 / 2 * ((t -= 2) * t * t * t - 2);\n\t\t},\n\t\teaseInQuint: function(t) {\n\t\t\treturn 1 * (t /= 1) * t * t * t * t;\n\t\t},\n\t\teaseOutQuint: function(t) {\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * t * t * t + 1);\n\t\t},\n\t\teaseInOutQuint: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t * t * t;\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * t * t * t + 2);\n\t\t},\n\t\teaseInSine: function(t) {\n\t\t\treturn -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1;\n\t\t},\n\t\teaseOutSine: function(t) {\n\t\t\treturn 1 * Math.sin(t / 1 * (Math.PI / 2));\n\t\t},\n\t\teaseInOutSine: function(t) {\n\t\t\treturn -1 / 2 * (Math.cos(Math.PI * t / 1) - 1);\n\t\t},\n\t\teaseInExpo: function(t) {\n\t\t\treturn (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1));\n\t\t},\n\t\teaseOutExpo: function(t) {\n\t\t\treturn (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1);\n\t\t},\n\t\teaseInOutExpo: function(t) {\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif (t === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * Math.pow(2, 10 * (t - 1));\n\t\t\t}\n\t\t\treturn 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\n\t\t},\n\t\teaseInCirc: function(t) {\n\t\t\tif (t >= 1) {\n\t\t\t\treturn t;\n\t\t\t}\n\t\t\treturn -1 * (Math.sqrt(1 - (t /= 1) * t) - 1);\n\t\t},\n\t\teaseOutCirc: function(t) {\n\t\t\treturn 1 * Math.sqrt(1 - (t = t / 1 - 1) * t);\n\t\t},\n\t\teaseInOutCirc: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn -1 / 2 * (Math.sqrt(1 - t * t) - 1);\n\t\t\t}\n\t\t\treturn 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n\t\t},\n\t\teaseInElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1) === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * 0.3;\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t},\n\t\teaseOutElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1) === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * 0.3;\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1;\n\t\t},\n\t\teaseInOutElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1 / 2) === 2) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * (0.3 * 1.5);\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\tif (t < 1) {\n\t\t\t\treturn -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t\t}\n\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\n\t\t},\n\t\teaseInBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn 1 * (t /= 1) * t * ((s + 1) * t - s);\n\t\t},\n\t\teaseOutBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\n\t\t},\n\t\teaseInOutBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n\t\t},\n\t\teaseInBounce: function(t) {\n\t\t\treturn 1 - easingEffects.easeOutBounce(1 - t);\n\t\t},\n\t\teaseOutBounce: function(t) {\n\t\t\tif ((t /= 1) < (1 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * t * t);\n\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75);\n\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375);\n\t\t\t}\n\t\t\treturn 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375);\n\t\t},\n\t\teaseInOutBounce: function(t) {\n\t\t\tif (t < 1 / 2) {\n\t\t\t\treturn easingEffects.easeInBounce(t * 2) * 0.5;\n\t\t\t}\n\t\t\treturn easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5;\n\t\t}\n\t};\n\t// Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\thelpers.requestAnimFrame = (function() {\n\t\treturn function(callback) {\n\t\t\t\treturn setTimeout(callback, 1000 / 60);\n\t\t\t};\n\t}());\n\thelpers.cancelAnimFrame = (function() {\n\t\treturn function(callback) {\n\t\t\t\treturn clearTimeout(callback, 1000 / 60);\n\t\t\t};\n\t}());\n\t// -- DOM methods\n\thelpers.getRelativePosition = function(evt, chart) {\n\t\tvar mouseX, mouseY;\n\t\tvar e = evt.originalEvent || evt,\n\t\t\tcanvas = evt.currentTarget || evt.srcElement,\n\t\t\tboundingRect = canvas.getBoundingClientRect();\n\t\tvar touches = e.touches;\n\t\tif (touches && touches.length > 0) {\n\t\t\tmouseX = touches[0].clientX;\n\t\t\tmouseY = touches[0].clientY;\n\t\t} else {\n\t\t\tmouseX = e.clientX;\n\t\t\tmouseY = e.clientY;\n\t\t}\n\t\t// Scale mouse coordinates into canvas coordinates\n\t\t// by following the pattern laid out by 'jerryj' in the comments of\n\t\t// http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\n\t\tvar paddingLeft = parseFloat(helpers.getStyle(canvas, 'padding-left'));\n\t\tvar paddingTop = parseFloat(helpers.getStyle(canvas, 'padding-top'));\n\t\tvar paddingRight = parseFloat(helpers.getStyle(canvas, 'padding-right'));\n\t\tvar paddingBottom = parseFloat(helpers.getStyle(canvas, 'padding-bottom'));\n\t\tvar width = boundingRect.right - boundingRect.left - paddingLeft - paddingRight;\n\t\tvar height = boundingRect.bottom - boundingRect.top - paddingTop - paddingBottom;\n\t\t// We divide by the current device pixel ratio, because the canvas is scaled up by that amount in each direction. However\n\t\t// the backend model is in unscaled coordinates. Since we are going to deal with our model coordinates, we go back here\n\t\tmouseX = Math.round((mouseX - boundingRect.left - paddingLeft) / (width) * canvas.width / chart.currentDevicePixelRatio);\n\t\tmouseY = Math.round((mouseY - boundingRect.top - paddingTop) / (height) * canvas.height / chart.currentDevicePixelRatio);\n\t\treturn {\n\t\t\tx: mouseX,\n\t\t\ty: mouseY\n\t\t};\n\t};\n\thelpers.addEvent = function(node, eventType, method) {\n\t\tif (node.addEventListener) {\n\t\t\tnode.addEventListener(eventType, method);\n\t\t} else if (node.attachEvent) {\n\t\t\tnode.attachEvent('on' + eventType, method);\n\t\t} else {\n\t\t\tnode['on' + eventType] = method;\n\t\t}\n\t};\n\thelpers.removeEvent = function(node, eventType, handler) {\n\t\tif (node.removeEventListener) {\n\t\t\tnode.removeEventListener(eventType, handler, false);\n\t\t} else if (node.detachEvent) {\n\t\t\tnode.detachEvent('on' + eventType, handler);\n\t\t} else {\n\t\t\tnode['on' + eventType] = helpers.noop;\n\t\t}\n\t};\n\thelpers.bindEvents = function(chartInstance, arrayOfEvents, handler) {\n\t\t// Create the events object if it's not already present\n\t\tvar events = chartInstance.events = chartInstance.events || {};\n\t\thelpers.each(arrayOfEvents, function(eventName) {\n\t\t\tevents[eventName] = function() {\n\t\t\t\thandler.apply(chartInstance, arguments);\n\t\t\t};\n\t\t\thelpers.addEvent(chartInstance.chart.canvas, eventName, events[eventName]);\n\t\t});\n\t};\n\thelpers.unbindEvents = function(chartInstance, arrayOfEvents) {\n\t\tvar canvas = chartInstance.chart.canvas;\n\t\thelpers.each(arrayOfEvents, function(handler, eventName) {\n\t\t\thelpers.removeEvent(canvas, eventName, handler);\n\t\t});\n\t};\n\t// Private helper function to convert max-width/max-height values that may be percentages into a number\n\tfunction parseMaxStyle(styleValue, node, parentProperty) {\n\t\tvar valueInPixels;\n\t\tif (typeof(styleValue) === 'string') {\n\t\t\tvalueInPixels = parseInt(styleValue, 10);\n\t\t\tif (styleValue.indexOf('%') !== -1) {\n\t\t\t\t// percentage * size in dimension\n\t\t\t\tvalueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n\t\t\t}\n\t\t} else {\n\t\t\tvalueInPixels = styleValue;\n\t\t}\n\t\treturn valueInPixels;\n\t}\n\t/**\n\t * Returns if the given value contains an effective constraint.\n\t * @private\n\t */\n\tfunction isConstrainedValue(value) {\n\t\treturn value !== undefined && value !== null && value !== 'none';\n\t}\n\t// Private helper to get a constraint dimension\n\t// @param domNode : the node to check the constraint on\n\t// @param maxStyle : the style that defines the maximum for the direction we are using (maxWidth / maxHeight)\n\t// @param percentageProperty : property of parent to use when calculating width as a percentage\n\t// @see http://www.nathanaeljones.com/blog/2013/reading-max-width-cross-browser\n\tfunction getConstraintDimension(domNode, maxStyle, percentageProperty) {\n\t\tvar view = document.defaultView;\n\t\tvar parentNode = domNode.parentNode;\n\t\tvar constrainedNode = view.getComputedStyle(domNode)[maxStyle];\n\t\tvar constrainedContainer = view.getComputedStyle(parentNode)[maxStyle];\n\t\tvar hasCNode = isConstrainedValue(constrainedNode);\n\t\tvar hasCContainer = isConstrainedValue(constrainedContainer);\n\t\tvar infinity = Number.POSITIVE_INFINITY;\n\t\tif (hasCNode || hasCContainer) {\n\t\t\treturn Math.min(\n\t\t\t\thasCNode? parseMaxStyle(constrainedNode, domNode, percentageProperty) : infinity,\n\t\t\t\thasCContainer? parseMaxStyle(constrainedContainer, parentNode, percentageProperty) : infinity);\n\t\t}\n\t\treturn 'none';\n\t}\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintWidth = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-width', 'clientWidth');\n\t};\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintHeight = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-height', 'clientHeight');\n\t};\n\thelpers.getMaximumWidth = function(domNode) {\n\t\treturn domNode.style.width;//直接用canvas宽度\n\t\tvar container = domNode.parentNode;\n\t\tvar paddingLeft = parseInt(helpers.getStyle(container, 'padding-left'), 10);\n\t\tvar paddingRight = parseInt(helpers.getStyle(container, 'padding-right'), 10);\n\t\tvar w = container.clientWidth - paddingLeft - paddingRight;\n\t\tvar cw = helpers.getConstraintWidth(domNode);\n\t\treturn isNaN(cw)? w : Math.min(w, cw);\n\t};\n\thelpers.getMaximumHeight = function(domNode) {\n\t\treturn domNode.style.height;//直接用canvas高度\n\t\tvar container = domNode.parentNode;\n\t\tvar paddingTop = parseInt(helpers.getStyle(container, 'padding-top'), 10);\n\t\tvar paddingBottom = parseInt(helpers.getStyle(container, 'padding-bottom'), 10);\n\t\tvar h = container.clientHeight - paddingTop - paddingBottom;\n\t\tvar ch = helpers.getConstraintHeight(domNode);\n\t\treturn isNaN(ch)? h : Math.min(h, ch);\n\t};\n\thelpers.getStyle = function(el, property) {\n\t\treturn el.currentStyle ?\n\t\t\tel.currentStyle[property] :\n\t\t\tdocument.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n\t};\n\thelpers.retinaScale = function(chart) {\n\t\tvar ctx = chart.ctx;\n\t\tvar canvas = chart.canvas;\n\t\tvar width = canvas.width;\n\t\tvar height = canvas.height;\n\t\tvar pixelRatio = chart.currentDevicePixelRatio = ctx.devicePixelRatio || 1;\n\t\tif (pixelRatio !== 1) {\n\t\t\tcanvas.height = height * pixelRatio;\n\t\t\tcanvas.width = width * pixelRatio;\n\t\t\tctx.scale(pixelRatio, pixelRatio);\n\t\t\t// Store the device pixel ratio so that we can go backwards in `destroy`.\n\t\t\t// The devicePixelRatio changes with zoom, so there are no guarantees that it is the same\n\t\t\t// when destroy is called\n\t\t\tchart.originalDevicePixelRatio = chart.originalDevicePixelRatio || pixelRatio;\n\t\t}\n\t};\n\t// -- Canvas methods\n\thelpers.clear = function(chart) {\n\t\tchart.ctx.clearRect(0, 0, chart.width, chart.height);\n\t};\n\thelpers.fontString = function(pixelSize, fontStyle, fontFamily) {\n\t\treturn fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n\t};\n\thelpers.longestText = function(ctx, font, arrayOfThings, cache) {\n\t\tcache = cache || {};\n\t\tvar data = cache.data = cache.data || {};\n\t\tvar gc = cache.garbageCollect = cache.garbageCollect || [];\n\t\tif (cache.font !== font) {\n\t\t\tdata = cache.data = {};\n\t\t\tgc = cache.garbageCollect = [];\n\t\t\tcache.font = font;\n\t\t}\n\t\tctx.font = font;//todo 这里需要添加setFontSize\n\t\tvar longest = 0;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\t// Undefined strings and arrays should not be measured\n\t\t\tif (thing !== undefined && thing !== null && helpers.isArray(thing) !== true) {\n\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, thing);\n\t\t\t} else if (helpers.isArray(thing)) {\n\t\t\t\t// if it is an array lets measure each element\n\t\t\t\t// to do maybe simplify this function a bit so we can do this more recursively?\n\t\t\t\thelpers.each(thing, function(nestedThing) {\n\t\t\t\t\t// Undefined strings and arrays should not be measured\n\t\t\t\t\tif (nestedThing !== undefined && nestedThing !== null && !helpers.isArray(nestedThing)) {\n\t\t\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, nestedThing);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tvar gcLen = gc.length / 2;\n\t\tif (gcLen > arrayOfThings.length) {\n\t\t\tfor (var i = 0; i < gcLen; i++) {\n\t\t\t\tdelete data[gc[i]];\n\t\t\t}\n\t\t\tgc.splice(0, gcLen);\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.measureText = function(ctx, data, gc, longest, string) {\n\t\tvar textWidth = data[string];\n\t\tif (!textWidth) {\n\t\t\ttextWidth = data[string] = ctx.measureText(string).width;\n\t\t\tgc.push(string);\n\t\t}\n\t\tif (textWidth > longest) {\n\t\t\tlongest = textWidth;\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.numberOfLabelLines = function(arrayOfThings) {\n\t\tvar numberOfLines = 1;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\tif (helpers.isArray(thing)) {\n\t\t\t\tif (thing.length > numberOfLines) {\n\t\t\t\t\tnumberOfLines = thing.length;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn numberOfLines;\n\t};\n\thelpers.drawRoundedRectangle = function(ctx, x, y, width, height, radius) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(x + radius, y);\n\t\tctx.lineTo(x + width - radius, y);\n\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n\t\tctx.lineTo(x + width, y + height - radius);\n\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n\t\tctx.lineTo(x + radius, y + height);\n\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n\t\tctx.lineTo(x, y + radius);\n\t\tctx.quadraticCurveTo(x, y, x + radius, y);\n\t\tctx.closePath();\n\t};\n\thelpers.color = function(c) {\n\t\tif (!color) {\n\t\t\tconsole.error('Color.js not found!');\n\t\t\treturn c;\n\t\t}\n\t\t// /* global CanvasGradient */\n\t\t// if (c instanceof CanvasGradient) {\n\t\t// \treturn color(Chart.defaults.global.defaultColor);\n\t\t// }\n\t\treturn color(c);\n\t};\n\thelpers.addResizeListener = function(node, callback) {//禁用事件\n\t\treturn;\n\t};\n\thelpers.removeResizeListener = function(node) {//禁用事件\n\t\treturn ;\n\t\tif (!node || !node._chartjs) {\n\t\t\treturn;\n\t\t}\n\t\tvar iframe = node._chartjs.resizer;\n\t\tif (iframe) {\n\t\t\tiframe.parentNode.removeChild(iframe);\n\t\t\tnode._chartjs.resizer = null;\n\t\t}\n\t\tdelete node._chartjs;\n\t};\n\thelpers.isArray = Array.isArray?\n\t\tfunction(obj) {\n\t\t\treturn Array.isArray(obj);\n\t\t} :\n\t\tfunction(obj) {\n\t\t\treturn Object.prototype.toString.call(obj) === '[object Array]';\n\t\t};\n\t// ! @see http://stackoverflow.com/a/14853974\n\thelpers.arrayEquals = function(a0, a1) {\n\t\tvar i, ilen, v0, v1;\n\t\tif (!a0 || !a1 || a0.length !== a1.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (i = 0, ilen=a0.length; i < ilen; ++i) {\n\t\t\tv0 = a0[i];\n\t\t\tv1 = a1[i];\n\t\t\tif (v0 instanceof Array && v1 instanceof Array) {\n\t\t\t\tif (!helpers.arrayEquals(v0, v1)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (v0 !== v1) {\n\t\t\t\t// NOTE: two different object instances will never be equal: {x:20} != {x:20}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t};\n\thelpers.callCallback = function(fn, args, _tArg) {\n\t\tif (fn && typeof fn.call === 'function') {\n\t\t\tfn.apply(_tArg, args);\n\t\t}\n\t};\n\thelpers.getHoverColor = function(colorValue) {\n\t\t/* global CanvasPattern */\n\t\treturn helpers.color(colorValue).saturate(0.5).darken(0.1).rgbString();\n\t};\n};\n"]}