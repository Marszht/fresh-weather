{"version":3,"sources":["lib/chartjs/scales/scale.time.js"],"names":["moment","require","window","module","exports","Chart","helpers","time","units","name","steps","maxStep","defaultConfig","position","parser","format","unit","round","displayFormat","isoWeekday","minUnit","displayFormats","millisecond","second","minute","hour","day","week","month","quarter","year","ticks","autoSkip","TimeScale","Scale","extend","initialize","Error","prototype","call","getLabelMoment","datasetIndex","index","labelMoments","getLabelDiff","me","labelDiffs","undefined","buildLabelDiffs","getMomentStartOf","tick","options","clone","startOf","tickUnit","determineDataLimits","scaleLabelMoments","chart","data","labels","length","each","label","labelMoment","parseTime","isValid","push","firstTick","min","lastTick","max","datasets","dataset","momentsForDataset","datasetVisible","isDatasetVisible","value","getRightValue","scaleLabelDiffs","diff","diffsForDataset","buildTicks","ctx","save","tickFontSize","getValueOrDefault","fontSize","defaults","global","defaultFontSize","tickFontStyle","fontStyle","defaultFontStyle","tickFontFamily","fontFamily","defaultFontFamily","tickLabelFont","fontString","font","setFontSize","unitScale","scaleSizeInUnits","unitStepSize","innerWidth","isHorizontal","width","paddingLeft","paddingRight","height","paddingTop","paddingBottom","tempFirstLabel","tickFormatFunction","tickLabelWidth","measureText","cosRotation","Math","cos","toRadians","maxRotation","sinRotation","sin","labelCapacity","unitDefinitionIndex","unitDefinition","isArray","ceil","idx","leadingUnitBuffer","trailingUnitBuffer","add","roundedStart","roundedEnd","delta","i","newTick","restore","getLabelForIndex","tooltipFormat","formattedTick","tickOpts","callback","userCallback","convertTicksToLabels","tickMoments","map","getPixelForValue","offset","decimal","valueOffset","left","innerHeight","heightOffset","top","getPixelForTick","getValueForPixel","pixel","innerDimension","duration","asSeconds","getMonth","console","warn","scaleService","registerScaleType"],"mappings":"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","file":"scale.time.js","sourcesContent":["/* global window: false */\n'use strict';\nvar moment = require('moment');\nmoment = typeof(moment) === 'function' ? moment : window.moment;\nmodule.exports = function(Chart) {\n\tvar helpers = Chart.helpers;\n\tvar time = {\n\t\tunits: [{\n\t\t\tname: 'millisecond',\n\t\t\tsteps: [1, 2, 5, 10, 20, 50, 100, 250, 500]\n\t\t}, {\n\t\t\tname: 'second',\n\t\t\tsteps: [1, 2, 5, 10, 30]\n\t\t}, {\n\t\t\tname: 'minute',\n\t\t\tsteps: [1, 2, 5, 10, 30]\n\t\t}, {\n\t\t\tname: 'hour',\n\t\t\tsteps: [1, 2, 3, 6, 12]\n\t\t}, {\n\t\t\tname: 'day',\n\t\t\tsteps: [1, 2, 5]\n\t\t}, {\n\t\t\tname: 'week',\n\t\t\tmaxStep: 4\n\t\t}, {\n\t\t\tname: 'month',\n\t\t\tmaxStep: 3\n\t\t}, {\n\t\t\tname: 'quarter',\n\t\t\tmaxStep: 4\n\t\t}, {\n\t\t\tname: 'year',\n\t\t\tmaxStep: false\n\t\t}]\n\t};\n\tvar defaultConfig = {\n\t\tposition: 'bottom',\n\t\ttime: {\n\t\t\tparser: false, // false == a pattern string from http://momentjs.com/docs/#/parsing/string-format/ or a custom callback that converts its argument to a moment\n\t\t\tformat: false, // DEPRECATED false == date objects, moment object, callback or a pattern string from http://momentjs.com/docs/#/parsing/string-format/\n\t\t\tunit: false, // false == automatic or override with week, month, year, etc.\n\t\t\tround: false, // none, or override with week, month, year, etc.\n\t\t\tdisplayFormat: false, // DEPRECATED\n\t\t\tisoWeekday: false, // override week start day - see http://momentjs.com/docs/#/get-set/iso-weekday/\n\t\t\tminUnit: 'millisecond',\n\t\t\t// defaults to unit's corresponding unitFormat below or override using pattern string from http://momentjs.com/docs/#/displaying/format/\n\t\t\tdisplayFormats: {\n\t\t\t\tmillisecond: 'h:mm:ss.SSS a', // 11:20:01.123 AM,\n\t\t\t\tsecond: 'h:mm:ss a', // 11:20:01 AM\n\t\t\t\tminute: 'h:mm:ss a', // 11:20:01 AM\n\t\t\t\thour: 'MMM D, hA', // Sept 4, 5PM\n\t\t\t\tday: 'll', // Sep 4 2015\n\t\t\t\tweek: 'll', // Week 46, or maybe \"[W]WW - YYYY\" ?\n\t\t\t\tmonth: 'MMM YYYY', // Sept 2015\n\t\t\t\tquarter: '[Q]Q - YYYY', // Q3\n\t\t\t\tyear: 'YYYY' // 2015\n\t\t\t}\n\t\t},\n\t\tticks: {\n\t\t\tautoSkip: false\n\t\t}\n\t};\n\tvar TimeScale = Chart.Scale.extend({\n\t\tinitialize: function() {\n\t\t\tif (!moment) {\n\t\t\t\tthrow new Error('Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com');\n\t\t\t}\n\t\t\tChart.Scale.prototype.initialize.call(this);\n\t\t},\n\t\tgetLabelMoment: function(datasetIndex, index) {\n\t\t\tif (datasetIndex === null || index === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (typeof this.labelMoments[datasetIndex] !== 'undefined') {\n\t\t\t\treturn this.labelMoments[datasetIndex][index];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetLabelDiff: function(datasetIndex, index) {\n\t\t\tvar me = this;\n\t\t\tif (datasetIndex === null || index === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (me.labelDiffs === undefined) {\n\t\t\t\tme.buildLabelDiffs();\n\t\t\t}\n\t\t\tif (typeof me.labelDiffs[datasetIndex] !== 'undefined') {\n\t\t\t\treturn me.labelDiffs[datasetIndex][index];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetMomentStartOf: function(tick) {\n\t\t\tvar me = this;\n\t\t\tif (me.options.time.unit === 'week' && me.options.time.isoWeekday !== false) {\n\t\t\t\treturn tick.clone().startOf('isoWeek').isoWeekday(me.options.time.isoWeekday);\n\t\t\t}\n\t\t\treturn tick.clone().startOf(me.tickUnit);\n\t\t},\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tme.labelMoments = [];\n\t\t\t// Only parse these once. If the dataset does not have data as x,y pairs, we will use\n\t\t\t// these\n\t\t\tvar scaleLabelMoments = [];\n\t\t\tif (me.chart.data.labels && me.chart.data.labels.length > 0) {\n\t\t\t\thelpers.each(me.chart.data.labels, function(label) {\n\t\t\t\t\tvar labelMoment = me.parseTime(label);\n\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscaleLabelMoments.push(labelMoment);\n\t\t\t\t\t}\n\t\t\t\t}, me);\n\t\t\t\tme.firstTick = moment.min.call(me, scaleLabelMoments);\n\t\t\t\tme.lastTick = moment.max.call(me, scaleLabelMoments);\n\t\t\t} else {\n\t\t\t\tme.firstTick = null;\n\t\t\t\tme.lastTick = null;\n\t\t\t}\n\t\t\thelpers.each(me.chart.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tvar momentsForDataset = [];\n\t\t\t\tvar datasetVisible = me.chart.isDatasetVisible(datasetIndex);\n\t\t\t\tif (typeof dataset.data[0] === 'object' && dataset.data[0] !== null) {\n\t\t\t\t\thelpers.each(dataset.data, function(value) {\n\t\t\t\t\t\tvar labelMoment = me.parseTime(me.getRightValue(value));\n\t\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmomentsForDataset.push(labelMoment);\n\t\t\t\t\t\t\tif (datasetVisible) {\n\t\t\t\t\t\t\t\t// May have gone outside the scale ranges, make sure we keep the first and last ticks updated\n\t\t\t\t\t\t\t\tme.firstTick = me.firstTick !== null ? moment.min(me.firstTick, labelMoment) : labelMoment;\n\t\t\t\t\t\t\t\tme.lastTick = me.lastTick !== null ? moment.max(me.lastTick, labelMoment) : labelMoment;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, me);\n\t\t\t\t} else {\n\t\t\t\t\t// We have no labels. Use the ones from the scale\n\t\t\t\t\tmomentsForDataset = scaleLabelMoments;\n\t\t\t\t}\n\t\t\t\tme.labelMoments.push(momentsForDataset);\n\t\t\t}, me);\n\t\t\t// Set these after we've done all the data\n\t\t\tif (me.options.time.min) {\n\t\t\t\tme.firstTick = me.parseTime(me.options.time.min);\n\t\t\t}\n\t\t\tif (me.options.time.max) {\n\t\t\t\tme.lastTick = me.parseTime(me.options.time.max);\n\t\t\t}\n\t\t\t// We will modify these, so clone for later\n\t\t\tme.firstTick = (me.firstTick || moment()).clone();\n\t\t\tme.lastTick = (me.lastTick || moment()).clone();\n\t\t},\n\t\tbuildLabelDiffs: function() {\n\t\t\tvar me = this;\n\t\t\tme.labelDiffs = [];\n\t\t\tvar scaleLabelDiffs = [];\n\t\t\t// Parse common labels once\n\t\t\tif (me.chart.data.labels && me.chart.data.labels.length > 0) {\n\t\t\t\thelpers.each(me.chart.data.labels, function(label) {\n\t\t\t\t\tvar labelMoment = me.parseTime(label);\n\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscaleLabelDiffs.push(labelMoment.diff(me.firstTick, me.tickUnit, true));\n\t\t\t\t\t}\n\t\t\t\t}, me);\n\t\t\t}\n\t\t\thelpers.each(me.chart.data.datasets, function(dataset) {\n\t\t\t\tvar diffsForDataset = [];\n\t\t\t\tif (typeof dataset.data[0] === 'object' && dataset.data[0] !== null) {\n\t\t\t\t\thelpers.each(dataset.data, function(value) {\n\t\t\t\t\t\tvar labelMoment = me.parseTime(me.getRightValue(value));\n\t\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdiffsForDataset.push(labelMoment.diff(me.firstTick, me.tickUnit, true));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, me);\n\t\t\t\t} else {\n\t\t\t\t\t// We have no labels. Use common ones\n\t\t\t\t\tdiffsForDataset = scaleLabelDiffs;\n\t\t\t\t}\n\t\t\t\tme.labelDiffs.push(diffsForDataset);\n\t\t\t}, me);\n\t\t},\n\t\tbuildTicks: function() {\n\t\t\tvar me = this;\n\t\t\tme.ctx.save();\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(me.options.ticks.fontSize, Chart.defaults.global.defaultFontSize);\n\t\t\tvar tickFontStyle = helpers.getValueOrDefault(me.options.ticks.fontStyle, Chart.defaults.global.defaultFontStyle);\n\t\t\tvar tickFontFamily = helpers.getValueOrDefault(me.options.ticks.fontFamily, Chart.defaults.global.defaultFontFamily);\n\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\t\t\tme.ctx.font = tickLabelFont;\n\t\t\tme.ctx.setFontSize(tickFontSize);\n\t\t\tme.ticks = [];\n\t\t\tme.unitScale = 1; // How much we scale the unit by, ie 2 means 2x unit per step\n\t\t\tme.scaleSizeInUnits = 0; // How large the scale is in the base unit (seconds, minutes, etc)\n\t\t\t// Set unit override if applicable\n\t\t\tif (me.options.time.unit) {\n\t\t\t\tme.tickUnit = me.options.time.unit || 'day';\n\t\t\t\tme.displayFormat = me.options.time.displayFormats[me.tickUnit];\n\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\tme.unitScale = helpers.getValueOrDefault(me.options.time.unitStepSize, 1);\n\t\t\t} else {\n\t\t\t\t// Determine the smallest needed unit of the time\n\t\t\t\tvar innerWidth = me.isHorizontal() ? me.width - (me.paddingLeft + me.paddingRight) : me.height - (me.paddingTop + me.paddingBottom);\n\t\t\t\t// Crude approximation of what the label length might be\n\t\t\t\tvar tempFirstLabel = me.tickFormatFunction(me.firstTick, 0, []);\n\t\t\t\tvar tickLabelWidth = me.ctx.measureText(tempFirstLabel).width;\n\t\t\t\tvar cosRotation = Math.cos(helpers.toRadians(me.options.ticks.maxRotation));\n\t\t\t\tvar sinRotation = Math.sin(helpers.toRadians(me.options.ticks.maxRotation));\n\t\t\t\ttickLabelWidth = (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation);\n\t\t\t\tvar labelCapacity = innerWidth / (tickLabelWidth);\n\t\t\t\t// Start as small as possible\n\t\t\t\tme.tickUnit = me.options.time.minUnit;\n\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\tme.displayFormat = me.options.time.displayFormats[me.tickUnit];\n\t\t\t\tvar unitDefinitionIndex = 0;\n\t\t\t\tvar unitDefinition = time.units[unitDefinitionIndex];\n\t\t\t\t// While we aren't ideal and we don't have units left\n\t\t\t\twhile (unitDefinitionIndex < time.units.length) {\n\t\t\t\t\t// Can we scale this unit. If `false` we can scale infinitely\n\t\t\t\t\tme.unitScale = 1;\n\t\t\t\t\tif (helpers.isArray(unitDefinition.steps) && Math.ceil(me.scaleSizeInUnits / labelCapacity) < helpers.max(unitDefinition.steps)) {\n\t\t\t\t\t\t// Use one of the predefined steps\n\t\t\t\t\t\tfor (var idx = 0; idx < unitDefinition.steps.length; ++idx) {\n\t\t\t\t\t\t\tif (unitDefinition.steps[idx] >= Math.ceil(me.scaleSizeInUnits / labelCapacity)) {\n\t\t\t\t\t\t\t\tme.unitScale = helpers.getValueOrDefault(me.options.time.unitStepSize, unitDefinition.steps[idx]);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if ((unitDefinition.maxStep === false) || (Math.ceil(me.scaleSizeInUnits / labelCapacity) < unitDefinition.maxStep)) {\n\t\t\t\t\t\t// We have a max step. Scale this unit\n\t\t\t\t\t\tme.unitScale = helpers.getValueOrDefault(me.options.time.unitStepSize, Math.ceil(me.scaleSizeInUnits / labelCapacity));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Move to the next unit up\n\t\t\t\t\t\t++unitDefinitionIndex;\n\t\t\t\t\t\tunitDefinition = time.units[unitDefinitionIndex];\n\t\t\t\t\t\tme.tickUnit = unitDefinition.name;\n\t\t\t\t\t\tvar leadingUnitBuffer = me.firstTick.diff(me.getMomentStartOf(me.firstTick), me.tickUnit, true);\n\t\t\t\t\t\tvar trailingUnitBuffer = me.getMomentStartOf(me.lastTick.clone().add(1, me.tickUnit)).diff(me.lastTick, me.tickUnit, true);\n\t\t\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true) + leadingUnitBuffer + trailingUnitBuffer;\n\t\t\t\t\t\tme.displayFormat = me.options.time.displayFormats[unitDefinition.name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar roundedStart;\n\t\t\t// Only round the first tick if we have no hard minimum\n\t\t\tif (!me.options.time.min) {\n\t\t\t\tme.firstTick = me.getMomentStartOf(me.firstTick);\n\t\t\t\troundedStart = me.firstTick;\n\t\t\t} else {\n\t\t\t\troundedStart = me.getMomentStartOf(me.firstTick);\n\t\t\t}\n\t\t\t// Only round the last tick if we have no hard maximum\n\t\t\tif (!me.options.time.max) {\n\t\t\t\tvar roundedEnd = me.getMomentStartOf(me.lastTick);\n\t\t\t\tvar delta = roundedEnd.diff(me.lastTick, me.tickUnit, true);\n\t\t\t\tif (delta < 0) {\n\t\t\t\t\t// Do not use end of because we need me to be in the next time unit\n\t\t\t\t\tme.lastTick = me.getMomentStartOf(me.lastTick.add(1, me.tickUnit));\n\t\t\t\t} else if (delta >= 0) {\n\t\t\t\t\tme.lastTick = roundedEnd;\n\t\t\t\t}\n\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t}\n\t\t\t// Tick displayFormat override\n\t\t\tif (me.options.time.displayFormat) {\n\t\t\t\tme.displayFormat = me.options.time.displayFormat;\n\t\t\t}\n\t\t\t// first tick. will have been rounded correctly if options.time.min is not specified\n\t\t\tme.ticks.push(me.firstTick.clone());\n\t\t\t// For every unit in between the first and last moment, create a moment and add it to the ticks tick\n\t\t\tfor (var i = 1; i <= me.scaleSizeInUnits; ++i) {\n\t\t\t\tvar newTick = roundedStart.clone().add(i, me.tickUnit);\n\t\t\t\t// Are we greater than the max time\n\t\t\t\tif (me.options.time.max && newTick.diff(me.lastTick, me.tickUnit, true) >= 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (i % me.unitScale === 0) {\n\t\t\t\t\tme.ticks.push(newTick);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Always show the right tick\n\t\t\tvar diff = me.ticks[me.ticks.length - 1].diff(me.lastTick, me.tickUnit);\n\t\t\tif (diff !== 0 || me.scaleSizeInUnits === 0) {\n\t\t\t\t// this is a weird case. If the <max> option is the same as the end option, we can't just diff the times because the tick was created from the roundedStart\n\t\t\t\t// but the last tick was not rounded.\n\t\t\t\tif (me.options.time.max) {\n\t\t\t\t\tme.ticks.push(me.lastTick.clone());\n\t\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.ticks[0], me.tickUnit, true);\n\t\t\t\t} else {\n\t\t\t\t\tme.ticks.push(me.lastTick.clone());\n\t\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tme.ctx.restore();\n\t\t\t// Invalidate label diffs cache\n\t\t\tme.labelDiffs = undefined;\n\t\t},\n\t\t// Get tooltip label\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar label = me.chart.data.labels && index < me.chart.data.labels.length ? me.chart.data.labels[index] : '';\n\t\t\tif (typeof me.chart.data.datasets[datasetIndex].data[0] === 'object') {\n\t\t\t\tlabel = me.getRightValue(me.chart.data.datasets[datasetIndex].data[index]);\n\t\t\t}\n\t\t\t// Format nicely\n\t\t\tif (me.options.time.tooltipFormat) {\n\t\t\t\tlabel = me.parseTime(label).format(me.options.time.tooltipFormat);\n\t\t\t}\n\t\t\treturn label;\n\t\t},\n\t\t// Function to format an individual tick mark\n\t\ttickFormatFunction: function(tick, index, ticks) {\n\t\t\tvar formattedTick = tick.format(this.displayFormat);\n\t\t\tvar tickOpts = this.options.ticks;\n\t\t\tvar callback = helpers.getValueOrDefault(tickOpts.callback, tickOpts.userCallback);\n\t\t\tif (callback) {\n\t\t\t\treturn callback(formattedTick, index, ticks);\n\t\t\t}\n\t\t\treturn formattedTick;\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tvar me = this;\n\t\t\tme.tickMoments = me.ticks;\n\t\t\tme.ticks = me.ticks.map(me.tickFormatFunction, me);\n\t\t},\n\t\tgetPixelForValue: function(value, index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar offset = null;\n\t\t\tif (index !== undefined && datasetIndex !== undefined) {\n\t\t\t\toffset = me.getLabelDiff(datasetIndex, index);\n\t\t\t}\n\t\t\tif (offset === null) {\n\t\t\t\tif (!value || !value.isValid) {\n\t\t\t\t\t// not already a moment object\n\t\t\t\t\tvalue = me.parseTime(me.getRightValue(value));\n\t\t\t\t}\n\t\t\t\tif (value && value.isValid && value.isValid()) {\n\t\t\t\t\toffset = value.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (offset !== null) {\n\t\t\t\tvar decimal = offset !== 0 ? offset / me.scaleSizeInUnits : offset;\n\t\t\t\tif (me.isHorizontal()) {\n\t\t\t\t\tvar innerWidth = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\t\tvar valueOffset = (innerWidth * decimal) + me.paddingLeft;\n\t\t\t\t\treturn me.left + Math.round(valueOffset);\n\t\t\t\t}\n\t\t\t\tvar innerHeight = me.height - (me.paddingTop + me.paddingBottom);\n\t\t\t\tvar heightOffset = (innerHeight * decimal) + me.paddingTop;\n\t\t\t\treturn me.top + Math.round(heightOffset);\n\t\t\t}\n\t\t},\n\t\tgetPixelForTick: function(index) {\n\t\t\treturn this.getPixelForValue(this.tickMoments[index], null, null);\n\t\t},\n\t\tgetValueForPixel: function(pixel) {\n\t\t\tvar me = this;\n\t\t\tvar innerDimension = me.isHorizontal() ? me.width - (me.paddingLeft + me.paddingRight) : me.height - (me.paddingTop + me.paddingBottom);\n\t\t\tvar offset = (pixel - (me.isHorizontal() ? me.left + me.paddingLeft : me.top + me.paddingTop)) / innerDimension;\n\t\t\toffset *= me.scaleSizeInUnits;\n\t\t\treturn me.firstTick.clone().add(moment.duration(offset, me.tickUnit).asSeconds(), 'seconds');\n\t\t},\n\t\tparseTime: function(label) {\n\t\t\tvar me = this;\n\t\t\tif (typeof me.options.time.parser === 'string') {\n\t\t\t\treturn moment(label, me.options.time.parser);\n\t\t\t}\n\t\t\tif (typeof me.options.time.parser === 'function') {\n\t\t\t\treturn me.options.time.parser(label);\n\t\t\t}\n\t\t\t// Date objects\n\t\t\tif (typeof label.getMonth === 'function' || typeof label === 'number') {\n\t\t\t\treturn moment(label);\n\t\t\t}\n\t\t\t// Moment support\n\t\t\tif (label.isValid && label.isValid()) {\n\t\t\t\treturn label;\n\t\t\t}\n\t\t\t// Custom parsing (return an instance of moment)\n\t\t\tif (typeof me.options.time.format !== 'string' && me.options.time.format.call) {\n\t\t\t\tconsole.warn('options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale');\n\t\t\t\treturn me.options.time.format(label);\n\t\t\t}\n\t\t\t// Moment format parsing\n\t\t\treturn moment(label, me.options.time.format);\n\t\t}\n\t});\n\tChart.scaleService.registerScaleType('time', TimeScale, defaultConfig);\n};\n"]}