{"version":3,"sources":["lib/chartjs/controllers/controller.bubble.js"],"names":["module","exports","Chart","helpers","defaults","bubble","hover","mode","scales","xAxes","type","position","id","yAxes","tooltips","callbacks","title","label","tooltipItem","data","datasetLabel","datasets","datasetIndex","dataPoint","index","xLabel","yLabel","r","controllers","DatasetController","extend","dataElementType","elements","Point","update","reset","me","meta","getMeta","points","each","point","updateElement","xScale","getScaleForId","xAxisID","yScale","yAxisID","custom","dataset","getDataset","pointElementOptions","chart","options","dsIndex","_xScale","_yScale","_datasetIndex","_index","_model","x","getPixelForDecimal","getPixelForValue","NaN","isCombo","y","getBasePixel","radius","getRadius","hitRadius","getValueAtIndexOrDefault","prototype","removeHoverStyle","call","model","skip","isNaN","pivot","value","setHoverStyle","hoverRadius","dataVal"],"mappings":"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","file":"controller.bubble.js","sourcesContent":["'use strict';\nmodule.exports = function(Chart) {\n\tvar helpers = Chart.helpers;\n\tChart.defaults.bubble = {\n\t\thover: {\n\t\t\tmode: 'single'\n\t\t},\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'linear', // bubble should probably use a linear scale by default\n\t\t\t\tposition: 'bottom',\n\t\t\t\tid: 'x-axis-0' // need an ID so datasets can reference the scale\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\ttype: 'linear',\n\t\t\t\tposition: 'left',\n\t\t\t\tid: 'y-axis-0'\n\t\t\t}]\n\t\t},\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function() {\n\t\t\t\t\t// Title doesn't make sense for scatter since we format the data as a point\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\t\tvar datasetLabel = data.datasets[tooltipItem.datasetIndex].label || '';\n\t\t\t\t\tvar dataPoint = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\n\t\t\t\t\treturn datasetLabel + ': (' + tooltipItem.xLabel + ', ' + tooltipItem.yLabel + ', ' + dataPoint.r + ')';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tChart.controllers.bubble = Chart.DatasetController.extend({\n\t\tdataElementType: Chart.elements.Point,\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar points = meta.data;\n\t\t\t// Update Points\n\t\t\thelpers.each(points, function(point, index) {\n\t\t\t\tme.updateElement(point, index, reset);\n\t\t\t});\n\t\t},\n\t\tupdateElement: function(point, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar data = dataset.data[index];\n\t\t\tvar pointElementOptions = me.chart.options.elements.point;\n\t\t\tvar dsIndex = me.index;\n\t\t\thelpers.extend(point, {\n\t\t\t\t// Utility\n\t\t\t\t_xScale: xScale,\n\t\t\t\t_yScale: yScale,\n\t\t\t\t_datasetIndex: dsIndex,\n\t\t\t\t_index: index,\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: reset ? xScale.getPixelForDecimal(0.5) : xScale.getPixelForValue(typeof data === 'object' ? data : NaN, index, dsIndex, me.chart.isCombo),\n\t\t\t\t\ty: reset ? yScale.getBasePixel() : yScale.getPixelForValue(data, index, dsIndex),\n\t\t\t\t\t// Appearance\n\t\t\t\t\tradius: reset ? 0 : custom.radius ? custom.radius : me.getRadius(data),\n\t\t\t\t\t// Tooltip\n\t\t\t\t\thitRadius: custom.hitRadius ? custom.hitRadius : helpers.getValueAtIndexOrDefault(dataset.hitRadius, index, pointElementOptions.hitRadius)\n\t\t\t\t}\n\t\t\t});\n\t\t\t// Trick to reset the styles of the point\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(me, point, pointElementOptions);\n\t\t\tvar model = point._model;\n\t\t\tmodel.skip = custom.skip ? custom.skip : (isNaN(model.x) || isNaN(model.y));\n\t\t\tpoint.pivot();\n\t\t},\n\t\tgetRadius: function(value) {\n\t\t\treturn value.r || this.chart.options.elements.point.radius;\n\t\t},\n\t\tsetHoverStyle: function(point) {\n\t\t\tvar me = this;\n\t\t\tChart.DatasetController.prototype.setHoverStyle.call(me, point);\n\t\t\t// Radius\n\t\t\tvar dataset = me.chart.data.datasets[point._datasetIndex];\n\t\t\tvar index = point._index;\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\t\t\tmodel.radius = custom.hoverRadius ? custom.hoverRadius : (helpers.getValueAtIndexOrDefault(dataset.hoverRadius, index, me.chart.options.elements.point.hoverRadius)) + me.getRadius(dataset.data[index]);\n\t\t},\n\t\tremoveHoverStyle: function(point) {\n\t\t\tvar me = this;\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(me, point, me.chart.options.elements.point);\n\t\t\tvar dataVal = me.chart.data.datasets[point._datasetIndex].data[point._index];\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\t\t\tmodel.radius = custom.radius ? custom.radius : me.getRadius(dataVal);\n\t\t}\n\t});\n};\n"]}